var Ke=Object.defineProperty,Je=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var ce=(c,e,n)=>e in c?Ke(c,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[e]=n,ie=(c,e)=>{for(var n in e||(e={}))Qe.call(e,n)&&ce(c,n,e[n]);if(se)for(var n of se(e))Ve.call(e,n)&&ce(c,n,e[n]);return c},oe=(c,e)=>Je(c,We(e));import{H as Xe,A as Ye,g as Ze,a as et,I as tt,c as rt,w as X,b as fe,d as ue,s as lt,p as nt,S as C,i as S,e as T,f as _,t as M,h as p,j as b,k as d,l as H,m as $,n as w,o as R,q as W,r as N,u as Y,v as k,x as I,y as g,z as h,B as A,C as Z,D as j,E as B,F as q,G as at,J as me,K as st,L as ct}from"./vendor.ceab2bca.js";const it=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}};it();const ot=new Xe({uri:"https://ragnarok-analytics.api.aidan.pro/"}),ft=new Ye((c,e)=>(c.setContext(({headers:n={}})=>({headers:oe(ie({},n),{Authorization:Ze(K)})})),e(c))),pe=new et({cache:new tt,link:rt(ft,ot)}),Q=({retry:c=!0}={})=>pe.query({fetchPolicy:"network-only",query:ue`
        query {
          events(orderBy: { eventCreatedAt: desc }) {
            eventId
            eventLabel
            eventCreatedAt
            eventCompletedAt

            games {
              eventId
              gameId
              gameMap
              gameWinningTeamId
              gameCreatedAt
              gameCompletedAt

              players {
                gameId
                memberId
                playerId
                playerTeamId
                playerCreatedAt
                playerStarred

                member {
                  memberId
                  memberDiscordId
                  memberDiscordAvatar
                  memberDiscordUsername
                }
              }
            }
          }
        }
      `}).then(e=>_e.set(e.data.events),async e=>{if(c)return await ee(),Q({retry:!1});throw e}),de=async(c,e)=>{await pe.mutate({mutation:ue`
      mutation setPlayerStarred(
        $playerId: Int!
        $playerStarred: Boolean!
      ) {
        updatePlayer(
          data: { playerStarred: { set: $playerStarred } }
          where: { playerId: $playerId }
        ) {
          playerId
        }
      }
    `,variables:{playerId:c,playerStarred:e}}),await Q()},ee=async()=>{const c=await fe("https://discord.com/api/oauth2/authorize",{prompt:"none",client_id:"886418657616486450",scope:"identify",redirect_uri:"https://ragnarok-analytics.app.aidan.pro/"}).catch(()=>fe("https://discord.com/api/oauth2/authorize",{client_id:"886418657616486450",scope:"identify",redirect_uri:"https://ragnarok-analytics.app.aidan.pro/"}));K.set(c)},K=X(localStorage.getItem("token")),ge=X(new Date),_e=X([]);K.subscribe(c=>localStorage.setItem("token",c));setInterval(()=>ge.set(new Date),1e3);const he=c=>c[0].toUpperCase()+c.substring(1),ut=c=>he(lt(new Date(c))),mt=(c,e)=>he(nt(new Date(e).getTime()-new Date(c).getTime(),{compact:!0}));function ye(c){let e,n;return{c(){e=_("span"),n=M(c[3]),p(e,"class","border rounded-lg px-2")},m(l,t){b(l,e,t),d(e,n)},p(l,t){t&8&&H(n,l[3])},d(l){l&&$(e)}}}function be(c){let e,n;return{c(){e=_("span"),n=M(c[2]),p(e,"class","border rounded-lg px-2")},m(l,t){b(l,e,t),d(e,n)},p(l,t){t&4&&H(n,l[2])},d(l){l&&$(e)}}}function pt(c){let e,n,l=c[0]&&ye(c),t=c[1]&&be(c);return{c(){e=_("div"),l&&l.c(),n=w(),t&&t.c(),p(e,"class","flex flex-row gap-1")},m(s,r){b(s,e,r),l&&l.m(e,null),d(e,n),t&&t.m(e,null)},p(s,[r]){s[0]?l?l.p(s,r):(l=ye(s),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s[1]?t?t.p(s,r):(t=be(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:R,o:R,d(s){s&&$(e),l&&l.d(),t&&t.d()}}}function dt(c,e,n){let l,t,s;W(c,ge,f=>n(6,s=f));let{created:r=!0}=e,{createdAt:i}=e,{duration:a=!0}=e,{completedAt:o}=e;return c.$$set=f=>{"created"in f&&n(0,r=f.created),"createdAt"in f&&n(4,i=f.createdAt),"duration"in f&&n(1,a=f.duration),"completedAt"in f&&n(5,o=f.completedAt)},c.$$.update=()=>{c.$$.dirty&16&&n(3,l=ut(i)),c.$$.dirty&112&&n(2,t=mt(i,o!=null?o:s.toString()))},[r,a,t,l,i,o,s]}class $e extends C{constructor(e){super();S(this,e,dt,pt,T,{created:0,createdAt:4,duration:1,completedAt:5})}}function gt(c){let e,n,l,t,s,r,i=c[0].memberDiscordUsername+"",a;return{c(){e=_("div"),n=_("img"),s=w(),r=_("span"),a=M(i),p(n,"class","rounded-full w-10 h-10"),p(n,"alt",l=c[0].memberDiscordUsername),N(n.src,t=c[0].memberDiscordAvatar)||p(n,"src",t),p(r,"class","overflow-ellipsis"),p(e,"class","flex flex-row items-center gap-2")},m(o,f){b(o,e,f),d(e,n),d(e,s),d(e,r),d(r,a)},p(o,[f]){f&1&&l!==(l=o[0].memberDiscordUsername)&&p(n,"alt",l),f&1&&!N(n.src,t=o[0].memberDiscordAvatar)&&p(n,"src",t),f&1&&i!==(i=o[0].memberDiscordUsername+"")&&H(a,i)},i:R,o:R,d(o){o&&$(e)}}}function _t(c,e,n){let{member:l}=e;return c.$$set=t=>{"member"in t&&n(0,l=t.member)},[l]}class J extends C{constructor(e){super();S(this,e,_t,gt,T,{member:0})}}function ht(c){let e,n,l,t;return{c(){var s;e=_("span"),p(e,"class","block w-8 h-8 bg-center bg-no-repeat bg-contain cursor-pointer svelte-otfjog"),p(e,"data-player-starred",n=(s=c[0])!=null?s:"null")},m(s,r){b(s,e,r),l||(t=Y(e,"click",c[1]),l=!0)},p(s,[r]){var i;r&1&&n!==(n=(i=s[0])!=null?i:"null")&&p(e,"data-player-starred",n)},i:R,o:R,d(s){s&&$(e),l=!1,t()}}}function yt(c,e,n){let{playerId:l}=e,{playerStarred:t}=e;const s=()=>{t===!1&&(de(l,!t),n(0,t=null)),t===!0&&(de(l,!t),n(0,t=null))};return c.$$set=r=>{"playerId"in r&&n(2,l=r.playerId),"playerStarred"in r&&n(0,t=r.playerStarred)},[t,s,l]}class bt extends C{constructor(e){super();S(this,e,yt,ht,T,{playerId:2,playerStarred:0})}}function ve(c,e,n){const l=c.slice();return l[1]=e[n],l}function we(c){let e,n,l,t,s,r;return n=new J({props:{member:c[1].member}}),t=new bt({props:{playerId:c[1].playerId,playerStarred:c[1].playerStarred}}),{c(){e=_("li"),k(n.$$.fragment),l=w(),k(t.$$.fragment),s=w(),p(e,"class","flex-none flex flex-row justify-between")},m(i,a){b(i,e,a),I(n,e,null),d(e,l),I(t,e,null),d(e,s),r=!0},p(i,a){const o={};a&1&&(o.member=i[1].member),n.$set(o);const f={};a&1&&(f.playerId=i[1].playerId),a&1&&(f.playerStarred=i[1].playerStarred),t.$set(f)},i(i){r||(g(n.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){h(n.$$.fragment,i),h(t.$$.fragment,i),r=!1},d(i){i&&$(e),A(n),A(t)}}}function $t(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=we(ve(c,l,r));const s=r=>h(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=Z()},m(r,i){for(let a=0;a<t.length;a+=1)t[a].m(r,i);b(r,e,i),n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=ve(r,l,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=we(o),t[a].c(),g(t[a],1),t[a].m(e.parentNode,e))}for(j(),a=l.length;a<t.length;a+=1)s(a);B()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)g(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)h(t[i]);n=!1},d(r){q(t,r),r&&$(e)}}}function vt(c,e,n){let{players:l}=e;return c.$$set=t=>{"players"in t&&n(0,l=t.players)},[l]}class te extends C{constructor(e){super();S(this,e,vt,$t,T,{players:0})}}function wt(c){let e,n,l,t=c[0].gameId+"",s,r,i,a,o,f,u,m,y,P,D,E,x,O,z,G,re,U,F;return i=new $e({props:{createdAt:c[0].gameCreatedAt,completedAt:c[0].gameCompletedAt,created:!1}}),y=new te({props:{players:c[3]}}),O=new te({props:{players:c[2]}}),U=new te({props:{players:c[1]}}),{c(){e=_("div"),n=_("span"),l=M("Game "),s=M(t),r=w(),k(i.$$.fragment),a=w(),o=_("div"),f=_("span"),f.textContent="Spectators",u=w(),m=_("ul"),k(y.$$.fragment),P=w(),D=_("div"),E=_("ul"),x=M(`Team 1
    `),k(O.$$.fragment),z=w(),G=_("ul"),re=M(`Team 2
    `),k(U.$$.fragment),p(e,"class","flex flex-row justify-between"),p(f,"class","block mb-4"),p(m,"class","flex flex-row flex-wrap gap-2"),p(o,"class","border rounded-lg p-2 my-2"),p(E,"class","flex flex-col gap-2 border rounded-lg p-2 my-2 w-1/2"),p(G,"class","flex flex-col gap-2 border rounded-lg p-2 my-2 w-1/2"),p(D,"class","flex flex-row gap-4")},m(v,L){b(v,e,L),d(e,n),d(n,l),d(n,s),d(e,r),I(i,e,null),b(v,a,L),b(v,o,L),d(o,f),d(o,u),d(o,m),I(y,m,null),b(v,P,L),b(v,D,L),d(D,E),d(E,x),I(O,E,null),d(D,z),d(D,G),d(G,re),I(U,G,null),F=!0},p(v,[L]){(!F||L&1)&&t!==(t=v[0].gameId+"")&&H(s,t);const V={};L&1&&(V.createdAt=v[0].gameCreatedAt),L&1&&(V.completedAt=v[0].gameCompletedAt),i.$set(V);const le={};L&8&&(le.players=v[3]),y.$set(le);const ne={};L&4&&(ne.players=v[2]),O.$set(ne);const ae={};L&2&&(ae.players=v[1]),U.$set(ae)},i(v){F||(g(i.$$.fragment,v),g(y.$$.fragment,v),g(O.$$.fragment,v),g(U.$$.fragment,v),F=!0)},o(v){h(i.$$.fragment,v),h(y.$$.fragment,v),h(O.$$.fragment,v),h(U.$$.fragment,v),F=!1},d(v){v&&$(e),A(i),v&&$(a),v&&$(o),A(y),v&&$(P),v&&$(D),A(O),A(U)}}}function kt(c,e,n){let l,t,s,{game:r}=e;return c.$$set=i=>{"game"in i&&n(0,r=i.game)},c.$$.update=()=>{c.$$.dirty&1&&n(3,l=r.players.filter(i=>i.playerTeamId===0)),c.$$.dirty&1&&n(2,t=r.players.filter(i=>i.playerTeamId===1)),c.$$.dirty&1&&n(1,s=r.players.filter(i=>i.playerTeamId===2))},[r,s,t,l]}class It extends C{constructor(e){super();S(this,e,kt,wt,T,{game:0})}}function ke(c,e,n){const l=c.slice();return l[0]=e[n],l}function Ie(c,e,n){const l=c.slice();return l[4]=e[n],l}function Ae(c){let e,n;return{c(){e=_("img"),N(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",n)},m(l,t){b(l,e,t)},p(l,t){t&1&&!N(e.src,n="./game-"+(l[4].playerTeamId===0?"spectated":"played")+".svg")&&p(e,"src",n)},d(l){l&&$(e)}}}function xe(c){let e,n,l,t,s,r;n=new J({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Ae(Ie(c,i,o));return{c(){e=_("div"),k(n.$$.fragment),l=w(),t=_("div");for(let o=0;o<a.length;o+=1)a[o].c();s=w(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){b(o,e,f),I(n,e,null),d(e,l),d(e,t);for(let u=0;u<a.length;u+=1)a[u].m(t,null);d(e,s),r=!0},p(o,f){const u={};if(f&1&&(u.member=o[0].member),n.$set(u),f&1){i=o[0].players;let m;for(m=0;m<i.length;m+=1){const y=Ie(o,i,m);a[m]?a[m].p(y,f):(a[m]=Ae(y),a[m].c(),a[m].m(t,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=i.length}},i(o){r||(g(n.$$.fragment,o),r=!0)},o(o){h(n.$$.fragment,o),r=!1},d(o){o&&$(e),A(n),q(a,o)}}}function At(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=xe(ke(c,l,r));const s=r=>h(t[r],1,1,()=>{t[r]=null});return{c(){e=_("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","grid gap-2")},m(r,i){b(r,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=ke(r,l,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=xe(o),t[a].c(),g(t[a],1),t[a].m(e,null))}for(j(),a=l.length;a<t.length;a+=1)s(a);B()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)g(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)h(t[i]);n=!1},d(r){r&&$(e),q(t,r)}}}function xt(c,e,n){let l,{players:t}=e;return c.$$set=s=>{"players"in s&&n(1,t=s.players)},c.$$.update=()=>{c.$$.dirty&3&&n(0,l=Object.values(t.sort((s,r)=>new Date(s.playerCreatedAt).getTime()-new Date(r.playerCreatedAt).getTime()).reduce((s,r)=>{var i,a;return(a=s[i=r.memberId])!=null||(s[i]={member:r.member,players:[]}),s[r.memberId].players.push(r),s},{})).sort((s,r)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,a=r.players.filter(o=>o.playerTeamId===0).length/r.players.length;if(i===a)return 0;if(i>a)return 1;if(i<a)return-1}))},[l,t]}class Ct extends C{constructor(e){super();S(this,e,xt,At,T,{players:1})}}function Ce(c,e,n){const l=c.slice();return l[0]=e[n],l}function Se(c,e,n){const l=c.slice();return l[4]=e[n],l}function Te(c){let e,n;return{c(){e=_("img"),N(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",n)},m(l,t){b(l,e,t)},p(l,t){t&1&&!N(e.src,n="./game-"+(l[4].playerTeamId===0?"spectated":"played")+".svg")&&p(e,"src",n)},d(l){l&&$(e)}}}function De(c){let e,n,l,t,s,r;n=new J({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Te(Se(c,i,o));return{c(){e=_("div"),k(n.$$.fragment),l=w(),t=_("div");for(let o=0;o<a.length;o+=1)a[o].c();s=w(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){b(o,e,f),I(n,e,null),d(e,l),d(e,t);for(let u=0;u<a.length;u+=1)a[u].m(t,null);d(e,s),r=!0},p(o,f){const u={};if(f&1&&(u.member=o[0].member),n.$set(u),f&1){i=o[0].players;let m;for(m=0;m<i.length;m+=1){const y=Se(o,i,m);a[m]?a[m].p(y,f):(a[m]=Te(y),a[m].c(),a[m].m(t,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=i.length}},i(o){r||(g(n.$$.fragment,o),r=!0)},o(o){h(n.$$.fragment,o),r=!1},d(o){o&&$(e),A(n),q(a,o)}}}function St(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=De(Ce(c,l,r));const s=r=>h(t[r],1,1,()=>{t[r]=null});return{c(){e=_("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","grid gap-2")},m(r,i){b(r,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=Ce(r,l,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=De(o),t[a].c(),g(t[a],1),t[a].m(e,null))}for(j(),a=l.length;a<t.length;a+=1)s(a);B()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)g(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)h(t[i]);n=!1},d(r){r&&$(e),q(t,r)}}}function Tt(c,e,n){let l,{players:t}=e;return c.$$set=s=>{"players"in s&&n(1,t=s.players)},c.$$.update=()=>{c.$$.dirty&3&&n(0,l=Object.values(t.sort((s,r)=>new Date(s.playerCreatedAt).getTime()-new Date(r.playerCreatedAt).getTime()).reduce((s,r)=>{var i,a;return(a=s[i=r.memberId])!=null||(s[i]={member:r.member,players:[]}),s[r.memberId].players.push(r),s[r.memberId].players=s[r.memberId].players.slice(-3),s},{})).filter(s=>!(s.players.filter(i=>i.playerTeamId===0).length/s.players.length<.5)).sort((s,r)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,a=r.players.filter(o=>o.playerTeamId===0).length/r.players.length;if(i===a)return 0;if(i>a)return-1;if(i<a)return 1}))},[l,t]}class Dt extends C{constructor(e){super();S(this,e,Tt,St,T,{players:1})}}function Pe(c,e,n){const l=c.slice();return l[0]=e[n],l}function Oe(c,e,n){const l=c.slice();return l[4]=e[n],l}function Le(c){let e,n;return{c(){e=_("img"),N(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",n)},m(l,t){b(l,e,t)},p(l,t){t&1&&!N(e.src,n="./game-"+(l[4].playerTeamId===0?"spectated":"played")+".svg")&&p(e,"src",n)},d(l){l&&$(e)}}}function Re(c){let e,n,l,t,s,r;n=new J({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Le(Oe(c,i,o));return{c(){e=_("div"),k(n.$$.fragment),l=w(),t=_("div");for(let o=0;o<a.length;o+=1)a[o].c();s=w(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){b(o,e,f),I(n,e,null),d(e,l),d(e,t);for(let u=0;u<a.length;u+=1)a[u].m(t,null);d(e,s),r=!0},p(o,f){const u={};if(f&1&&(u.member=o[0].member),n.$set(u),f&1){i=o[0].players;let m;for(m=0;m<i.length;m+=1){const y=Oe(o,i,m);a[m]?a[m].p(y,f):(a[m]=Le(y),a[m].c(),a[m].m(t,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=i.length}},i(o){r||(g(n.$$.fragment,o),r=!0)},o(o){h(n.$$.fragment,o),r=!1},d(o){o&&$(e),A(n),q(a,o)}}}function Pt(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=Re(Pe(c,l,r));const s=r=>h(t[r],1,1,()=>{t[r]=null});return{c(){e=_("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","grid gap-2")},m(r,i){b(r,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=Pe(r,l,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=Re(o),t[a].c(),g(t[a],1),t[a].m(e,null))}for(j(),a=l.length;a<t.length;a+=1)s(a);B()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)g(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)h(t[i]);n=!1},d(r){r&&$(e),q(t,r)}}}function Ot(c,e,n){let l,{players:t}=e;return c.$$set=s=>{"players"in s&&n(1,t=s.players)},c.$$.update=()=>{c.$$.dirty&3&&n(0,l=Object.values(t.filter(s=>s.playerTeamId===0).sort((s,r)=>new Date(s.playerCreatedAt).getTime()-new Date(r.playerCreatedAt).getTime()).reduce((s,r)=>{var i,a;return(a=s[i=r.memberId])!=null||(s[i]={member:r.member,players:[]}),s[r.memberId].players.push(r),s},{})).sort((s,r)=>{const i=s.players.length,a=r.players.length;if(i===a)return 0;if(i>a)return-1;if(i<a)return 1}))},[l,t]}class Lt extends C{constructor(e){super();S(this,e,Ot,Pt,T,{players:1})}}function Rt(c){let e,n;return{c(){var l;e=_("span"),p(e,"class","block w-8 h-8 bg-center bg-no-repeat bg-contain svelte-7gdy3i"),p(e,"data-player-starred",n=(l=c[0])!=null?l:"null")},m(l,t){b(l,e,t)},p(l,[t]){var s;t&1&&n!==(n=(s=l[0])!=null?s:"null")&&p(e,"data-player-starred",n)},i:R,o:R,d(l){l&&$(e)}}}function jt(c,e,n){let{playerStarred:l}=e;return c.$$set=t=>{"playerStarred"in t&&n(0,l=t.playerStarred)},[l]}class Bt extends C{constructor(e){super();S(this,e,jt,Rt,T,{playerStarred:0})}}function je(c,e,n){const l=c.slice();return l[0]=e[n],l}function Be(c,e,n){const l=c.slice();return l[4]=e[n],l}function qe(c){let e,n;return e=new Bt({props:{playerStarred:c[4].playerStarred}}),{c(){k(e.$$.fragment)},m(l,t){I(e,l,t),n=!0},p(l,t){const s={};t&1&&(s.playerStarred=l[4].playerStarred),e.$set(s)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){h(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Me(c){let e,n,l=c[4].playerStarred&&qe(c);return{c(){l&&l.c(),e=Z()},m(t,s){l&&l.m(t,s),b(t,e,s),n=!0},p(t,s){t[4].playerStarred?l?(l.p(t,s),s&1&&g(l,1)):(l=qe(t),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(j(),h(l,1,1,()=>{l=null}),B())},i(t){n||(g(l),n=!0)},o(t){h(l),n=!1},d(t){l&&l.d(t),t&&$(e)}}}function Ee(c){let e,n,l,t,s,r;n=new J({props:{member:c[0].member}});let i=c[0].players,a=[];for(let f=0;f<i.length;f+=1)a[f]=Me(Be(c,i,f));const o=f=>h(a[f],1,1,()=>{a[f]=null});return{c(){e=_("div"),k(n.$$.fragment),l=w(),t=_("div");for(let f=0;f<a.length;f+=1)a[f].c();s=w(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(f,u){b(f,e,u),I(n,e,null),d(e,l),d(e,t);for(let m=0;m<a.length;m+=1)a[m].m(t,null);d(e,s),r=!0},p(f,u){const m={};if(u&1&&(m.member=f[0].member),n.$set(m),u&1){i=f[0].players;let y;for(y=0;y<i.length;y+=1){const P=Be(f,i,y);a[y]?(a[y].p(P,u),g(a[y],1)):(a[y]=Me(P),a[y].c(),g(a[y],1),a[y].m(t,null))}for(j(),y=i.length;y<a.length;y+=1)o(y);B()}},i(f){if(!r){g(n.$$.fragment,f);for(let u=0;u<i.length;u+=1)g(a[u]);r=!0}},o(f){h(n.$$.fragment,f),a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)h(a[u]);r=!1},d(f){f&&$(e),A(n),q(a,f)}}}function qt(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=Ee(je(c,l,r));const s=r=>h(t[r],1,1,()=>{t[r]=null});return{c(){e=_("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","grid gap-2")},m(r,i){b(r,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=je(r,l,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=Ee(o),t[a].c(),g(t[a],1),t[a].m(e,null))}for(j(),a=l.length;a<t.length;a+=1)s(a);B()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)g(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)h(t[i]);n=!1},d(r){r&&$(e),q(t,r)}}}function Mt(c,e,n){let l,{players:t}=e;return c.$$set=s=>{"players"in s&&n(1,t=s.players)},c.$$.update=()=>{c.$$.dirty&3&&n(0,l=Object.values(t.sort((s,r)=>new Date(s.playerCreatedAt).getTime()-new Date(r.playerCreatedAt).getTime()).reduce((s,r)=>{var i,a;return(a=s[i=r.memberId])!=null||(s[i]={member:r.member,players:[]}),s[r.memberId].players.push(r),s},{})).sort((s,r)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,a=r.players.filter(o=>o.playerTeamId===0).length/r.players.length;if(i===a)return 0;if(i>a)return 1;if(i<a)return-1}))},[l,t]}class Et extends C{constructor(e){super();S(this,e,Mt,qt,T,{players:1})}}function Gt(c){let e,n,l,t,s,r,i,a,o,f,u,m,y,P;var D=c[2];function E(x){return{props:{players:x[0]}}}return D&&(u=new D(E(c))),{c(){e=_("div"),n=_("div"),l=_("span"),l.textContent="Overview",t=w(),s=_("select"),r=_("option"),r.textContent="History",i=_("option"),i.textContent="Recently Spectated",a=_("option"),a.textContent="Most Spectated",o=_("option"),o.textContent="Stars",f=w(),u&&k(u.$$.fragment),p(l,"class","text-lg mb-2 block"),r.__value="history",r.value=r.__value,i.__value="recently-spectated",i.value=i.__value,a.__value="most-spectated",a.value=a.__value,o.__value="stars",o.value=o.__value,p(s,"class","border rounded-lg py-2 dark:bg-black"),c[1]===void 0&&at(()=>c[3].call(s)),p(n,"class","flex flex-row justify-between"),p(e,"class","border rounded-lg p-4 mt-2")},m(x,O){b(x,e,O),d(e,n),d(n,l),d(n,t),d(n,s),d(s,r),d(s,i),d(s,a),d(s,o),me(s,c[1]),d(e,f),u&&I(u,e,null),m=!0,y||(P=Y(s,"change",c[3]),y=!0)},p(x,[O]){O&2&&me(s,x[1]);const z={};if(O&1&&(z.players=x[0]),D!==(D=x[2])){if(u){j();const G=u;h(G.$$.fragment,1,0,()=>{A(G,1)}),B()}D?(u=new D(E(x)),k(u.$$.fragment),g(u.$$.fragment,1),I(u,e,null)):u=null}else D&&u.$set(z)},i(x){m||(u&&g(u.$$.fragment,x),m=!0)},o(x){u&&h(u.$$.fragment,x),m=!1},d(x){x&&$(e),u&&A(u),y=!1,P()}}}function Nt(c,e,n){let{players:l}=e,t="history",s;function r(){t=st(this),n(1,t)}return c.$$set=i=>{"players"in i&&n(0,l=i.players)},c.$$.update=()=>{if(c.$$.dirty&2)switch(t){case"history":n(2,s=Ct);break;case"recently-spectated":n(2,s=Dt);break;case"most-spectated":n(2,s=Lt);break;case"stars":n(2,s=Et);break}},[l,t,s,r]}class Ut extends C{constructor(e){super();S(this,e,Nt,Gt,T,{players:0})}}function Ge(c,e,n){const l=c.slice();return l[2]=e[n],l}function Ne(c){let e,n,l,t;return n=new It({props:{game:c[2]}}),{c(){e=_("li"),k(n.$$.fragment),l=w(),p(e,"class","border rounded-md p-2")},m(s,r){b(s,e,r),I(n,e,null),d(e,l),t=!0},p(s,r){const i={};r&1&&(i.game=s[2]),n.$set(i)},i(s){t||(g(n.$$.fragment,s),t=!0)},o(s){h(n.$$.fragment,s),t=!1},d(s){s&&$(e),A(n)}}}function zt(c){let e,n,l,t;e=new Ut({props:{players:c[1]}});let s=c[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=Ne(Ge(c,s,a));const i=a=>h(r[a],1,1,()=>{r[a]=null});return{c(){k(e.$$.fragment),n=w(),l=_("ul");for(let a=0;a<r.length;a+=1)r[a].c();p(l,"class","mt-12 flex flex-col gap-12")},m(a,o){I(e,a,o),b(a,n,o),b(a,l,o);for(let f=0;f<r.length;f+=1)r[f].m(l,null);t=!0},p(a,[o]){const f={};if(o&2&&(f.players=a[1]),e.$set(f),o&1){s=a[0];let u;for(u=0;u<s.length;u+=1){const m=Ge(a,s,u);r[u]?(r[u].p(m,o),g(r[u],1)):(r[u]=Ne(m),r[u].c(),g(r[u],1),r[u].m(l,null))}for(j(),u=s.length;u<r.length;u+=1)i(u);B()}},i(a){if(!t){g(e.$$.fragment,a);for(let o=0;o<s.length;o+=1)g(r[o]);t=!0}},o(a){h(e.$$.fragment,a),r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)h(r[o]);t=!1},d(a){A(e,a),a&&$(n),a&&$(l),q(r,a)}}}function Ft(c,e,n){let l,{games:t}=e;return c.$$set=s=>{"games"in s&&n(0,t=s.games)},c.$$.update=()=>{c.$$.dirty&1&&n(1,l=t.flatMap(s=>s.players))},[t,l]}class Ht extends C{constructor(e){super();S(this,e,Ft,zt,T,{games:0})}}function Kt(c){let e,n,l,t=c[0].eventId+"",s,r,i,a,o,f;return i=new $e({props:{createdAt:c[0].eventCreatedAt,completedAt:c[0].eventCompletedAt}}),o=new Ht({props:{games:c[1]}}),{c(){e=_("div"),n=_("span"),l=M("Ragnarok Event "),s=M(t),r=w(),k(i.$$.fragment),a=w(),k(o.$$.fragment),p(n,"class","whitespace-nowrap text-lg"),p(e,"class","flex flex-row justify-between")},m(u,m){b(u,e,m),d(e,n),d(n,l),d(n,s),d(e,r),I(i,e,null),b(u,a,m),I(o,u,m),f=!0},p(u,[m]){(!f||m&1)&&t!==(t=u[0].eventId+"")&&H(s,t);const y={};m&1&&(y.createdAt=u[0].eventCreatedAt),m&1&&(y.completedAt=u[0].eventCompletedAt),i.$set(y);const P={};m&2&&(P.games=u[1]),o.$set(P)},i(u){f||(g(i.$$.fragment,u),g(o.$$.fragment,u),f=!0)},o(u){h(i.$$.fragment,u),h(o.$$.fragment,u),f=!1},d(u){u&&$(e),A(i),u&&$(a),A(o,u)}}}function Jt(c,e,n){let l,{event:t}=e;return c.$$set=s=>{"event"in s&&n(0,t=s.event)},c.$$.update=()=>{c.$$.dirty&1&&n(1,l=[...t.games].sort((s,r)=>new Date(r.gameCreatedAt).getTime()-new Date(s.gameCreatedAt).getTime()))},[t,l]}class Wt extends C{constructor(e){super();S(this,e,Jt,Kt,T,{event:0})}}function Ue(c,e,n){const l=c.slice();return l[1]=e[n],l}function ze(c){let e,n,l;return n=new Wt({props:{event:c[1]}}),{c(){e=_("li"),k(n.$$.fragment),p(e,"class","border rounded-md px-8 py-6")},m(t,s){b(t,e,s),I(n,e,null),l=!0},p(t,s){const r={};s&1&&(r.event=t[1]),n.$set(r)},i(t){l||(g(n.$$.fragment,t),l=!0)},o(t){h(n.$$.fragment,t),l=!1},d(t){t&&$(e),A(n)}}}function Qt(c){let e,n,l,t,s=c[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=ze(Ue(c,s,a));const i=a=>h(r[a],1,1,()=>{r[a]=null});return{c(){e=_("ul");for(let a=0;a<r.length;a+=1)r[a].c();n=w(),l=_("li"),p(e,"class","container mx-auto flex flex-col gap-20 mt-6")},m(a,o){b(a,e,o);for(let f=0;f<r.length;f+=1)r[f].m(e,null);d(e,n),d(e,l),t=!0},p(a,[o]){if(o&1){s=a[0];let f;for(f=0;f<s.length;f+=1){const u=Ue(a,s,f);r[f]?(r[f].p(u,o),g(r[f],1)):(r[f]=ze(u),r[f].c(),g(r[f],1),r[f].m(e,n))}for(j(),f=s.length;f<r.length;f+=1)i(f);B()}},i(a){if(!t){for(let o=0;o<s.length;o+=1)g(r[o]);t=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)h(r[o]);t=!1},d(a){a&&$(e),q(r,a)}}}function Vt(c,e,n){let{events:l}=e;return c.$$set=t=>{"events"in t&&n(0,l=t.events)},[l]}class Xt extends C{constructor(e){super();S(this,e,Vt,Qt,T,{events:0})}}function Yt(c){let e,n;return e=new Xt({props:{events:c[0]}}),{c(){k(e.$$.fragment)},m(l,t){I(e,l,t),n=!0},p(l,[t]){const s={};t&1&&(s.events=l[0]),e.$set(s)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){h(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Zt(c,e,n){let l;return W(c,_e,t=>n(0,l=t)),Q(),setInterval(()=>Q(),1e3*15),[l]}class er extends C{constructor(e){super();S(this,e,Zt,Yt,T,{})}}function Fe(c){let e,n,l;return{c(){e=_("button"),e.textContent="Login",p(e,"class","ml-auto border rounded-lg px-4 py-2")},m(t,s){b(t,e,s),n||(l=Y(e,"click",ee),n=!0)},p:R,d(t){t&&$(e),n=!1,l()}}}function tr(c){let e,n,l,t=!c[0]&&Fe();return{c(){e=_("nav"),n=_("span"),n.textContent="Ragnarok Analytics",l=w(),t&&t.c(),p(n,"class","inline-flex items-center"),p(e,"class","flex flex-row border-b p-4")},m(s,r){b(s,e,r),d(e,n),d(e,l),t&&t.m(e,null)},p(s,[r]){s[0]?t&&(t.d(1),t=null):t?t.p(s,r):(t=Fe(),t.c(),t.m(e,null))},i:R,o:R,d(s){s&&$(e),t&&t.d()}}}function rr(c,e,n){let l;return W(c,K,t=>n(0,l=t)),l||ee(),[l]}class lr extends C{constructor(e){super();S(this,e,rr,tr,T,{})}}function He(c){let e,n;return e=new er({}),{c(){k(e.$$.fragment)},m(l,t){I(e,l,t),n=!0},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){h(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function nr(c){let e,n,l,t;e=new lr({});let s=c[0]&&He();return{c(){k(e.$$.fragment),n=w(),s&&s.c(),l=Z()},m(r,i){I(e,r,i),b(r,n,i),s&&s.m(r,i),b(r,l,i),t=!0},p(r,[i]){r[0]?s?i&1&&g(s,1):(s=He(),s.c(),g(s,1),s.m(l.parentNode,l)):s&&(j(),h(s,1,1,()=>{s=null}),B())},i(r){t||(g(e.$$.fragment,r),g(s),t=!0)},o(r){h(e.$$.fragment,r),h(s),t=!1},d(r){A(e,r),r&&$(n),s&&s.d(r),r&&$(l)}}}function ar(c,e,n){let l;return W(c,K,t=>n(0,l=t)),[l]}class sr extends C{constructor(e){super();S(this,e,ar,nr,T,{})}}ct();addEventListener("load",()=>{new sr({target:document.querySelector("#application")})});
