var Se=Object.defineProperty,je=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var le=(c,e,a)=>e in c?Se(c,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[e]=a,re=(c,e)=>{for(var a in e||(e={}))Me.call(e,a)&&le(c,a,e[a]);if(te)for(var a of te(e))Ee.call(e,a)&&le(c,a,e[a]);return c},ne=(c,e)=>je(c,Be(e));import{H as Ue,A as ze,g as Ge,a as Ne,I as Fe,c as He,w as V,b as ae,d as Ke,s as Je,p as We,S as C,i as T,e as D,f as d,t as S,h as p,j as _,k as m,l as F,m as h,n as v,o as R,q as K,r as H,u as k,v as A,x as g,y as $,z as x,B as se,C as B,D as M,E as j,F as Qe,G as ce,J as ie,K as Ve,L as Xe}from"./vendor.481a7179.js";const Ye=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}};Ye();const Ze=new Ue({uri:"https://ragnarok-analytics.api.aidan.pro/"}),et=new ze((c,e)=>(c.setContext(({headers:a={}})=>({headers:ne(re({},a),{Authorization:Ge(J)})})),e(c))),tt=new Ne({cache:new Fe,link:He(et,Ze)}),X=({retry:c=!0}={})=>tt.query({fetchPolicy:"network-only",query:Ke`
        query {
          events(orderBy: { eventCreatedAt: desc }) {
            eventId
            eventLabel
            eventCreatedAt
            eventCompletedAt

            games {
              eventId
              gameId
              gameMap
              gameWinningTeamId
              gameCreatedAt
              gameCompletedAt

              players {
                gameId
                memberId
                playerId
                playerTeamId
                playerCreatedAt

                member {
                  memberId
                  memberDiscordId
                  memberDiscordAvatar
                  memberDiscordUsername
                }
              }
            }
          }
        }
      `}).then(e=>fe.set(e.data.events),async e=>{if(c)return await Y(),X({retry:!1});throw e}),Y=async()=>{const c=await ae("https://discord.com/api/oauth2/authorize",{prompt:"none",client_id:"886418657616486450",scope:"identify",redirect_uri:"https://ragnarok-analytics.app.aidan.pro/"}).catch(()=>ae("https://discord.com/api/oauth2/authorize",{client_id:"886418657616486450",scope:"identify",redirect_uri:"https://ragnarok-analytics.app.aidan.pro/"}));J.set(c)},J=V(""),oe=V(new Date),fe=V([]);setInterval(()=>oe.set(new Date),1e3);const ue=c=>c[0].toUpperCase()+c.substring(1),lt=c=>ue(Je(new Date(c))),rt=(c,e)=>ue(We(new Date(e).getTime()-new Date(c).getTime(),{compact:!0}));function me(c){let e,a;return{c(){e=d("span"),a=S(c[3]),p(e,"class","border rounded-lg px-2")},m(r,t){_(r,e,t),m(e,a)},p(r,t){t&8&&F(a,r[3])},d(r){r&&h(e)}}}function de(c){let e,a;return{c(){e=d("span"),a=S(c[2]),p(e,"class","border rounded-lg px-2")},m(r,t){_(r,e,t),m(e,a)},p(r,t){t&4&&F(a,r[2])},d(r){r&&h(e)}}}function nt(c){let e,a,r=c[0]&&me(c),t=c[1]&&de(c);return{c(){e=d("div"),r&&r.c(),a=v(),t&&t.c(),p(e,"class","flex flex-row gap-1")},m(s,l){_(s,e,l),r&&r.m(e,null),m(e,a),t&&t.m(e,null)},p(s,[l]){s[0]?r?r.p(s,l):(r=me(s),r.c(),r.m(e,a)):r&&(r.d(1),r=null),s[1]?t?t.p(s,l):(t=de(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:R,o:R,d(s){s&&h(e),r&&r.d(),t&&t.d()}}}function at(c,e,a){let r,t,s;K(c,oe,f=>a(6,s=f));let{created:l=!0}=e,{createdAt:i}=e,{duration:n=!0}=e,{completedAt:o}=e;return c.$$set=f=>{"created"in f&&a(0,l=f.created),"createdAt"in f&&a(4,i=f.createdAt),"duration"in f&&a(1,n=f.duration),"completedAt"in f&&a(5,o=f.completedAt)},c.$$.update=()=>{c.$$.dirty&16&&a(3,r=lt(i)),c.$$.dirty&112&&a(2,t=rt(i,o!=null?o:s.toString()))},[l,n,t,r,i,o,s]}class pe extends C{constructor(e){super();T(this,e,at,nt,D,{created:0,createdAt:4,duration:1,completedAt:5})}}function st(c){let e,a,r,t,s,l,i=c[0].memberDiscordUsername+"",n;return{c(){e=d("div"),a=d("img"),s=v(),l=d("span"),n=S(i),p(a,"class","rounded-full w-10 h-10"),p(a,"alt",r=c[0].memberDiscordUsername),H(a.src,t=c[0].memberDiscordAvatar)||p(a,"src",t),p(l,"class","overflow-ellipsis"),p(e,"class","flex flex-row items-center gap-2")},m(o,f){_(o,e,f),m(e,a),m(e,s),m(e,l),m(l,n)},p(o,[f]){f&1&&r!==(r=o[0].memberDiscordUsername)&&p(a,"alt",r),f&1&&!H(a.src,t=o[0].memberDiscordAvatar)&&p(a,"src",t),f&1&&i!==(i=o[0].memberDiscordUsername+"")&&F(n,i)},i:R,o:R,d(o){o&&h(e)}}}function ct(c,e,a){let{member:r}=e;return c.$$set=t=>{"member"in t&&a(0,r=t.member)},[r]}class W extends C{constructor(e){super();T(this,e,ct,st,D,{member:0})}}function ge(c,e,a){const r=c.slice();return r[1]=e[a],r}function _e(c){let e,a,r,t;return a=new W({props:{member:c[1].member}}),{c(){e=d("li"),k(a.$$.fragment),r=v(),p(e,"class","flex-none")},m(s,l){_(s,e,l),A(a,e,null),m(e,r),t=!0},p(s,l){const i={};l&1&&(i.member=s[1].member),a.$set(i)},i(s){t||(g(a.$$.fragment,s),t=!0)},o(s){$(a.$$.fragment,s),t=!1},d(s){s&&h(e),x(a)}}}function it(c){let e,a,r=c[0],t=[];for(let l=0;l<r.length;l+=1)t[l]=_e(ge(c,r,l));const s=l=>$(t[l],1,1,()=>{t[l]=null});return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=se()},m(l,i){for(let n=0;n<t.length;n+=1)t[n].m(l,i);_(l,e,i),a=!0},p(l,[i]){if(i&1){r=l[0];let n;for(n=0;n<r.length;n+=1){const o=ge(l,r,n);t[n]?(t[n].p(o,i),g(t[n],1)):(t[n]=_e(o),t[n].c(),g(t[n],1),t[n].m(e.parentNode,e))}for(B(),n=r.length;n<t.length;n+=1)s(n);M()}},i(l){if(!a){for(let i=0;i<r.length;i+=1)g(t[i]);a=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)$(t[i]);a=!1},d(l){j(t,l),l&&h(e)}}}function ot(c,e,a){let{players:r}=e;return c.$$set=t=>{"players"in t&&a(0,r=t.players)},[r]}class Z extends C{constructor(e){super();T(this,e,ot,it,D,{players:0})}}function ft(c){let e,a,r,t=c[0].gameId+"",s,l,i,n,o,f,u,y,L,I,O,w,E,P,z,G,ee,U,N;return i=new pe({props:{createdAt:c[0].gameCreatedAt,completedAt:c[0].gameCompletedAt,created:!1}}),L=new Z({props:{players:c[1]}}),P=new Z({props:{players:c[2]}}),U=new Z({props:{players:c[3]}}),{c(){e=d("div"),a=d("span"),r=S("Game "),s=S(t),l=v(),k(i.$$.fragment),n=v(),o=d("div"),f=d("span"),f.textContent="Spectators",u=v(),y=d("ul"),k(L.$$.fragment),I=v(),O=d("div"),w=d("ul"),E=S(`Team 1
    `),k(P.$$.fragment),z=v(),G=d("ul"),ee=S(`Team 2
    `),k(U.$$.fragment),p(e,"class","flex flex-row justify-between"),p(f,"class","block mb-4"),p(y,"class","flex flex-row flex-wrap gap-2"),p(o,"class","border rounded-lg p-2 my-2"),p(w,"class","flex flex-col gap-2 border rounded-lg p-2 my-2 w-1/2"),p(G,"class","flex flex-col gap-2 border rounded-lg p-2 my-2 w-1/2"),p(O,"class","flex flex-row gap-4")},m(b,q){_(b,e,q),m(e,a),m(a,r),m(a,s),m(e,l),A(i,e,null),_(b,n,q),_(b,o,q),m(o,f),m(o,u),m(o,y),A(L,y,null),_(b,I,q),_(b,O,q),m(O,w),m(w,E),A(P,w,null),m(O,z),m(O,G),m(G,ee),A(U,G,null),N=!0},p(b,[q]){(!N||q&1)&&t!==(t=b[0].gameId+"")&&F(s,t);const Q={};q&1&&(Q.createdAt=b[0].gameCreatedAt),q&1&&(Q.completedAt=b[0].gameCompletedAt),i.$set(Q)},i(b){N||(g(i.$$.fragment,b),g(L.$$.fragment,b),g(P.$$.fragment,b),g(U.$$.fragment,b),N=!0)},o(b){$(i.$$.fragment,b),$(L.$$.fragment,b),$(P.$$.fragment,b),$(U.$$.fragment,b),N=!1},d(b){b&&h(e),x(i),b&&h(n),b&&h(o),x(L),b&&h(I),b&&h(O),x(P),x(U)}}}function ut(c,e,a){let{game:r}=e;const t=r.players.filter(i=>i.playerTeamId===0),s=r.players.filter(i=>i.playerTeamId===1),l=r.players.filter(i=>i.playerTeamId===2);return c.$$set=i=>{"game"in i&&a(0,r=i.game)},[r,t,s,l]}class mt extends C{constructor(e){super();T(this,e,ut,ft,D,{game:0})}}function he(c,e,a){const r=c.slice();return r[0]=e[a],r}function $e(c,e,a){const r=c.slice();return r[4]=e[a],r}function ye(c){let e,a;return{c(){e=d("img"),H(e.src,a="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",a)},m(r,t){_(r,e,t)},p:R,d(r){r&&h(e)}}}function be(c){let e,a,r,t,s,l;a=new W({props:{member:c[0].member}});let i=c[0].players,n=[];for(let o=0;o<i.length;o+=1)n[o]=ye($e(c,i,o));return{c(){e=d("div"),k(a.$$.fragment),r=v(),t=d("div");for(let o=0;o<n.length;o+=1)n[o].c();s=v(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){_(o,e,f),A(a,e,null),m(e,r),m(e,t);for(let u=0;u<n.length;u+=1)n[u].m(t,null);m(e,s),l=!0},p(o,f){if(f&1){i=o[0].players;let u;for(u=0;u<i.length;u+=1){const y=$e(o,i,u);n[u]?n[u].p(y,f):(n[u]=ye(y),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=i.length}},i(o){l||(g(a.$$.fragment,o),l=!0)},o(o){$(a.$$.fragment,o),l=!1},d(o){o&&h(e),x(a),j(n,o)}}}function dt(c){let e,a,r=c[0],t=[];for(let l=0;l<r.length;l+=1)t[l]=be(he(c,r,l));const s=l=>$(t[l],1,1,()=>{t[l]=null});return{c(){e=d("div");for(let l=0;l<t.length;l+=1)t[l].c();p(e,"class","grid gap-2")},m(l,i){_(l,e,i);for(let n=0;n<t.length;n+=1)t[n].m(e,null);a=!0},p(l,[i]){if(i&1){r=l[0];let n;for(n=0;n<r.length;n+=1){const o=he(l,r,n);t[n]?(t[n].p(o,i),g(t[n],1)):(t[n]=be(o),t[n].c(),g(t[n],1),t[n].m(e,null))}for(B(),n=r.length;n<t.length;n+=1)s(n);M()}},i(l){if(!a){for(let i=0;i<r.length;i+=1)g(t[i]);a=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)$(t[i]);a=!1},d(l){l&&h(e),j(t,l)}}}function pt(c,e,a){let{players:r}=e;const t=Object.values(r.sort((s,l)=>new Date(s.playerCreatedAt).getTime()-new Date(l.playerCreatedAt).getTime()).reduce((s,l)=>{var i,n;return(n=s[i=l.memberId])!=null||(s[i]={member:l.member,players:[]}),s[l.memberId].players.push(l),s},{})).sort((s,l)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,n=l.players.filter(o=>o.playerTeamId===0).length/l.players.length;if(i===n)return 0;if(i>n)return 1;if(i<n)return-1});return c.$$set=s=>{"players"in s&&a(1,r=s.players)},[t,r]}class gt extends C{constructor(e){super();T(this,e,pt,dt,D,{players:1})}}function ve(c,e,a){const r=c.slice();return r[0]=e[a],r}function we(c,e,a){const r=c.slice();return r[4]=e[a],r}function ke(c){let e,a;return{c(){e=d("img"),H(e.src,a="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",a)},m(r,t){_(r,e,t)},p:R,d(r){r&&h(e)}}}function Ae(c){let e,a,r,t,s,l;a=new W({props:{member:c[0].member}});let i=c[0].players,n=[];for(let o=0;o<i.length;o+=1)n[o]=ke(we(c,i,o));return{c(){e=d("div"),k(a.$$.fragment),r=v(),t=d("div");for(let o=0;o<n.length;o+=1)n[o].c();s=v(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){_(o,e,f),A(a,e,null),m(e,r),m(e,t);for(let u=0;u<n.length;u+=1)n[u].m(t,null);m(e,s),l=!0},p(o,f){if(f&1){i=o[0].players;let u;for(u=0;u<i.length;u+=1){const y=we(o,i,u);n[u]?n[u].p(y,f):(n[u]=ke(y),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=i.length}},i(o){l||(g(a.$$.fragment,o),l=!0)},o(o){$(a.$$.fragment,o),l=!1},d(o){o&&h(e),x(a),j(n,o)}}}function _t(c){let e,a,r=c[0],t=[];for(let l=0;l<r.length;l+=1)t[l]=Ae(ve(c,r,l));const s=l=>$(t[l],1,1,()=>{t[l]=null});return{c(){e=d("div");for(let l=0;l<t.length;l+=1)t[l].c();p(e,"class","grid gap-2")},m(l,i){_(l,e,i);for(let n=0;n<t.length;n+=1)t[n].m(e,null);a=!0},p(l,[i]){if(i&1){r=l[0];let n;for(n=0;n<r.length;n+=1){const o=ve(l,r,n);t[n]?(t[n].p(o,i),g(t[n],1)):(t[n]=Ae(o),t[n].c(),g(t[n],1),t[n].m(e,null))}for(B(),n=r.length;n<t.length;n+=1)s(n);M()}},i(l){if(!a){for(let i=0;i<r.length;i+=1)g(t[i]);a=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)$(t[i]);a=!1},d(l){l&&h(e),j(t,l)}}}function ht(c,e,a){let{players:r}=e;const t=Object.values(r.sort((s,l)=>new Date(s.playerCreatedAt).getTime()-new Date(l.playerCreatedAt).getTime()).reduce((s,l)=>{var i,n;return(n=s[i=l.memberId])!=null||(s[i]={member:l.member,players:[]}),s[l.memberId].players.push(l),s[l.memberId].players=s[l.memberId].players.slice(-3),s},{})).filter(s=>!(s.players.filter(i=>i.playerTeamId===0).length/s.players.length<.5)).sort((s,l)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,n=l.players.filter(o=>o.playerTeamId===0).length/l.players.length;if(i===n)return 0;if(i>n)return-1;if(i<n)return 1});return c.$$set=s=>{"players"in s&&a(1,r=s.players)},[t,r]}class $t extends C{constructor(e){super();T(this,e,ht,_t,D,{players:1})}}function xe(c,e,a){const r=c.slice();return r[0]=e[a],r}function Ie(c,e,a){const r=c.slice();return r[4]=e[a],r}function Ce(c){let e,a;return{c(){e=d("img"),H(e.src,a="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",a)},m(r,t){_(r,e,t)},p:R,d(r){r&&h(e)}}}function Te(c){let e,a,r,t,s,l;a=new W({props:{member:c[0].member}});let i=c[0].players,n=[];for(let o=0;o<i.length;o+=1)n[o]=Ce(Ie(c,i,o));return{c(){e=d("div"),k(a.$$.fragment),r=v(),t=d("div");for(let o=0;o<n.length;o+=1)n[o].c();s=v(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){_(o,e,f),A(a,e,null),m(e,r),m(e,t);for(let u=0;u<n.length;u+=1)n[u].m(t,null);m(e,s),l=!0},p(o,f){if(f&1){i=o[0].players;let u;for(u=0;u<i.length;u+=1){const y=Ie(o,i,u);n[u]?n[u].p(y,f):(n[u]=Ce(y),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=i.length}},i(o){l||(g(a.$$.fragment,o),l=!0)},o(o){$(a.$$.fragment,o),l=!1},d(o){o&&h(e),x(a),j(n,o)}}}function yt(c){let e,a,r=c[0],t=[];for(let l=0;l<r.length;l+=1)t[l]=Te(xe(c,r,l));const s=l=>$(t[l],1,1,()=>{t[l]=null});return{c(){e=d("div");for(let l=0;l<t.length;l+=1)t[l].c();p(e,"class","grid gap-2")},m(l,i){_(l,e,i);for(let n=0;n<t.length;n+=1)t[n].m(e,null);a=!0},p(l,[i]){if(i&1){r=l[0];let n;for(n=0;n<r.length;n+=1){const o=xe(l,r,n);t[n]?(t[n].p(o,i),g(t[n],1)):(t[n]=Te(o),t[n].c(),g(t[n],1),t[n].m(e,null))}for(B(),n=r.length;n<t.length;n+=1)s(n);M()}},i(l){if(!a){for(let i=0;i<r.length;i+=1)g(t[i]);a=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)$(t[i]);a=!1},d(l){l&&h(e),j(t,l)}}}function bt(c,e,a){let{players:r}=e;const t=Object.values(r.filter(s=>s.playerTeamId===0).sort((s,l)=>new Date(s.playerCreatedAt).getTime()-new Date(l.playerCreatedAt).getTime()).reduce((s,l)=>{var i,n;return(n=s[i=l.memberId])!=null||(s[i]={member:l.member,players:[]}),s[l.memberId].players.push(l),s},{})).sort((s,l)=>{const i=s.players.length,n=l.players.length;if(i===n)return 0;if(i>n)return-1;if(i<n)return 1});return c.$$set=s=>{"players"in s&&a(1,r=s.players)},[t,r]}class vt extends C{constructor(e){super();T(this,e,bt,yt,D,{players:1})}}function wt(c){let e,a,r,t,s,l,i,n,o,f,u,y,L;var I=c[2];function O(w){return{props:{players:w[0]}}}return I&&(f=new I(O(c))),{c(){e=d("div"),a=d("div"),r=d("span"),r.textContent="Overview",t=v(),s=d("select"),l=d("option"),l.textContent="History",i=d("option"),i.textContent="Recently Spectated",n=d("option"),n.textContent="Most Spectated",o=v(),f&&k(f.$$.fragment),p(r,"class","text-lg mb-2 block"),l.__value="history",l.value=l.__value,i.__value="recently-spectated",i.value=i.__value,n.__value="most-spectated",n.value=n.__value,p(s,"class","border rounded-lg py-2 dark:bg-black"),c[1]===void 0&&Qe(()=>c[3].call(s)),p(a,"class","flex flex-row justify-between"),p(e,"class","border rounded-lg p-4 mt-2")},m(w,E){_(w,e,E),m(e,a),m(a,r),m(a,t),m(a,s),m(s,l),m(s,i),m(s,n),ce(s,c[1]),m(e,o),f&&A(f,e,null),u=!0,y||(L=ie(s,"change",c[3]),y=!0)},p(w,[E]){E&2&&ce(s,w[1]);const P={};if(E&1&&(P.players=w[0]),I!==(I=w[2])){if(f){B();const z=f;$(z.$$.fragment,1,0,()=>{x(z,1)}),M()}I?(f=new I(O(w)),k(f.$$.fragment),g(f.$$.fragment,1),A(f,e,null)):f=null}else I&&f.$set(P)},i(w){u||(f&&g(f.$$.fragment,w),u=!0)},o(w){f&&$(f.$$.fragment,w),u=!1},d(w){w&&h(e),f&&x(f),y=!1,L()}}}function kt(c,e,a){let{players:r}=e,t="history",s;function l(){t=Ve(this),a(1,t)}return c.$$set=i=>{"players"in i&&a(0,r=i.players)},c.$$.update=()=>{if(c.$$.dirty&2)switch(t){case"history":a(2,s=gt);break;case"recently-spectated":a(2,s=$t);break;case"most-spectated":a(2,s=vt);break}},[r,t,s,l]}class At extends C{constructor(e){super();T(this,e,kt,wt,D,{players:0})}}function De(c,e,a){const r=c.slice();return r[2]=e[a],r}function Le(c){let e,a,r,t;return a=new mt({props:{game:c[2]}}),{c(){e=d("li"),k(a.$$.fragment),r=v(),p(e,"class","border rounded-md p-2")},m(s,l){_(s,e,l),A(a,e,null),m(e,r),t=!0},p(s,l){const i={};l&1&&(i.game=s[2]),a.$set(i)},i(s){t||(g(a.$$.fragment,s),t=!0)},o(s){$(a.$$.fragment,s),t=!1},d(s){s&&h(e),x(a)}}}function xt(c){let e,a,r,t;e=new At({props:{players:c[1]}});let s=c[0],l=[];for(let n=0;n<s.length;n+=1)l[n]=Le(De(c,s,n));const i=n=>$(l[n],1,1,()=>{l[n]=null});return{c(){k(e.$$.fragment),a=v(),r=d("ul");for(let n=0;n<l.length;n+=1)l[n].c();p(r,"class","mt-12 flex flex-col gap-12")},m(n,o){A(e,n,o),_(n,a,o),_(n,r,o);for(let f=0;f<l.length;f+=1)l[f].m(r,null);t=!0},p(n,[o]){if(o&1){s=n[0];let f;for(f=0;f<s.length;f+=1){const u=De(n,s,f);l[f]?(l[f].p(u,o),g(l[f],1)):(l[f]=Le(u),l[f].c(),g(l[f],1),l[f].m(r,null))}for(B(),f=s.length;f<l.length;f+=1)i(f);M()}},i(n){if(!t){g(e.$$.fragment,n);for(let o=0;o<s.length;o+=1)g(l[o]);t=!0}},o(n){$(e.$$.fragment,n),l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)$(l[o]);t=!1},d(n){x(e,n),n&&h(a),n&&h(r),j(l,n)}}}function It(c,e,a){let{games:r}=e;const t=r.flatMap(s=>s.players);return c.$$set=s=>{"games"in s&&a(0,r=s.games)},[r,t]}class Ct extends C{constructor(e){super();T(this,e,It,xt,D,{games:0})}}function Tt(c){let e,a,r,t=c[0].eventId+"",s,l,i,n,o,f;return i=new pe({props:{createdAt:c[0].eventCreatedAt,completedAt:c[0].eventCompletedAt}}),o=new Ct({props:{games:[...c[0].games].sort(c[1])}}),{c(){e=d("div"),a=d("span"),r=S("Ragnarok Event "),s=S(t),l=v(),k(i.$$.fragment),n=v(),k(o.$$.fragment),p(a,"class","whitespace-nowrap text-lg"),p(e,"class","flex flex-row justify-between")},m(u,y){_(u,e,y),m(e,a),m(a,r),m(a,s),m(e,l),A(i,e,null),_(u,n,y),A(o,u,y),f=!0},p(u,[y]){(!f||y&1)&&t!==(t=u[0].eventId+"")&&F(s,t);const L={};y&1&&(L.createdAt=u[0].eventCreatedAt),y&1&&(L.completedAt=u[0].eventCompletedAt),i.$set(L);const I={};y&1&&(I.games=[...u[0].games].sort(u[1])),o.$set(I)},i(u){f||(g(i.$$.fragment,u),g(o.$$.fragment,u),f=!0)},o(u){$(i.$$.fragment,u),$(o.$$.fragment,u),f=!1},d(u){u&&h(e),x(i),u&&h(n),x(o,u)}}}function Dt(c,e,a){let{event:r}=e;const t=(s,l)=>new Date(l.gameCreatedAt).getTime()-new Date(s.gameCreatedAt).getTime();return c.$$set=s=>{"event"in s&&a(0,r=s.event)},[r,t]}class Lt extends C{constructor(e){super();T(this,e,Dt,Tt,D,{event:0})}}function Oe(c,e,a){const r=c.slice();return r[1]=e[a],r}function Re(c){let e,a,r;return a=new Lt({props:{event:c[1]}}),{c(){e=d("li"),k(a.$$.fragment),p(e,"class","border rounded-md px-8 py-6")},m(t,s){_(t,e,s),A(a,e,null),r=!0},p(t,s){const l={};s&1&&(l.event=t[1]),a.$set(l)},i(t){r||(g(a.$$.fragment,t),r=!0)},o(t){$(a.$$.fragment,t),r=!1},d(t){t&&h(e),x(a)}}}function Ot(c){let e,a,r,t,s=c[0],l=[];for(let n=0;n<s.length;n+=1)l[n]=Re(Oe(c,s,n));const i=n=>$(l[n],1,1,()=>{l[n]=null});return{c(){e=d("ul");for(let n=0;n<l.length;n+=1)l[n].c();a=v(),r=d("li"),p(e,"class","container mx-auto flex flex-col gap-20 mt-6")},m(n,o){_(n,e,o);for(let f=0;f<l.length;f+=1)l[f].m(e,null);m(e,a),m(e,r),t=!0},p(n,[o]){if(o&1){s=n[0];let f;for(f=0;f<s.length;f+=1){const u=Oe(n,s,f);l[f]?(l[f].p(u,o),g(l[f],1)):(l[f]=Re(u),l[f].c(),g(l[f],1),l[f].m(e,a))}for(B(),f=s.length;f<l.length;f+=1)i(f);M()}},i(n){if(!t){for(let o=0;o<s.length;o+=1)g(l[o]);t=!0}},o(n){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)$(l[o]);t=!1},d(n){n&&h(e),j(l,n)}}}function Rt(c,e,a){let{events:r}=e;return c.$$set=t=>{"events"in t&&a(0,r=t.events)},[r]}class Pt extends C{constructor(e){super();T(this,e,Rt,Ot,D,{events:0})}}function qt(c){let e,a;return e=new Pt({props:{events:c[0]}}),{c(){k(e.$$.fragment)},m(r,t){A(e,r,t),a=!0},p(r,[t]){const s={};t&1&&(s.events=r[0]),e.$set(s)},i(r){a||(g(e.$$.fragment,r),a=!0)},o(r){$(e.$$.fragment,r),a=!1},d(r){x(e,r)}}}function St(c,e,a){let r;return K(c,fe,t=>a(0,r=t)),X(),setInterval(()=>X(),1e3*15),[r]}class jt extends C{constructor(e){super();T(this,e,St,qt,D,{})}}function Pe(c){let e,a,r;return{c(){e=d("button"),e.textContent="Login",p(e,"class","ml-auto border rounded-lg px-4 py-2")},m(t,s){_(t,e,s),a||(r=ie(e,"click",Y),a=!0)},p:R,d(t){t&&h(e),a=!1,r()}}}function Bt(c){let e,a,r,t=!c[0]&&Pe();return{c(){e=d("nav"),a=d("span"),a.textContent="Ragnarok Analytics",r=v(),t&&t.c(),p(a,"class","inline-flex items-center"),p(e,"class","flex flex-row border-b p-4")},m(s,l){_(s,e,l),m(e,a),m(e,r),t&&t.m(e,null)},p(s,[l]){s[0]?t&&(t.d(1),t=null):t?t.p(s,l):(t=Pe(),t.c(),t.m(e,null))},i:R,o:R,d(s){s&&h(e),t&&t.d()}}}function Mt(c,e,a){let r;return K(c,J,t=>a(0,r=t)),r||Y(),[r]}class Et extends C{constructor(e){super();T(this,e,Mt,Bt,D,{})}}function qe(c){let e,a;return e=new jt({}),{c(){k(e.$$.fragment)},m(r,t){A(e,r,t),a=!0},i(r){a||(g(e.$$.fragment,r),a=!0)},o(r){$(e.$$.fragment,r),a=!1},d(r){x(e,r)}}}function Ut(c){let e,a,r,t;e=new Et({});let s=c[0]&&qe();return{c(){k(e.$$.fragment),a=v(),s&&s.c(),r=se()},m(l,i){A(e,l,i),_(l,a,i),s&&s.m(l,i),_(l,r,i),t=!0},p(l,[i]){l[0]?s?i&1&&g(s,1):(s=qe(),s.c(),g(s,1),s.m(r.parentNode,r)):s&&(B(),$(s,1,1,()=>{s=null}),M())},i(l){t||(g(e.$$.fragment,l),g(s),t=!0)},o(l){$(e.$$.fragment,l),$(s),t=!1},d(l){x(e,l),l&&h(a),s&&s.d(l),l&&h(r)}}}function zt(c,e,a){let r;return K(c,J,t=>a(0,r=t)),[r]}class Gt extends C{constructor(e){super();T(this,e,zt,Ut,D,{})}}Xe();addEventListener("load",()=>{new Gt({target:document.querySelector("#application")})});
