var He=Object.defineProperty,Ke=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var se=(c,e,n)=>e in c?He(c,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[e]=n,ce=(c,e)=>{for(var n in e||(e={}))We.call(e,n)&&se(c,n,e[n]);if(ae)for(var n of ae(e))Qe.call(e,n)&&se(c,n,e[n]);return c},ie=(c,e)=>Ke(c,Je(e));import{H as Ve,A as Xe,g as Ye,a as Ze,I as et,c as tt,w as X,b as oe,d as fe,s as rt,p as lt,S as C,i as S,e as T,f as g,t as M,h as p,j as b,k as d,l as H,m as $,n as w,o as R,q as W,r as U,u as Y,v as k,x as I,y as _,z as y,B as A,C as ue,D as B,E as q,F as j,G as nt,J as me,K as at,L as st}from"./vendor.ceab2bca.js";const ct=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}};ct();const it=new Ve({uri:"https://ragnarok-analytics.api.aidan.pro/"}),ot=new Xe((c,e)=>(c.setContext(({headers:n={}})=>({headers:ie(ce({},n),{Authorization:Ye(K)})})),e(c))),pe=new Ze({cache:new et,link:tt(ot,it)}),Q=({retry:c=!0}={})=>pe.query({fetchPolicy:"network-only",query:fe`
        query {
          events(orderBy: { eventCreatedAt: desc }) {
            eventId
            eventLabel
            eventCreatedAt
            eventCompletedAt

            games {
              eventId
              gameId
              gameMap
              gameWinningTeamId
              gameCreatedAt
              gameCompletedAt

              players {
                gameId
                memberId
                playerId
                playerTeamId
                playerCreatedAt
                playerStarred

                member {
                  memberId
                  memberDiscordId
                  memberDiscordAvatar
                  memberDiscordUsername
                }
              }
            }
          }
        }
      `}).then(e=>_e.set(e.data.events),async e=>{if(c)return await Z(),Q({retry:!1});throw e}),de=async(c,e)=>{await pe.mutate({mutation:fe`
      mutation setPlayerStarred(
        $playerId: Int!
        $playerStarred: Boolean!
      ) {
        updatePlayer(
          data: { playerStarred: { set: $playerStarred } }
          where: { playerId: $playerId }
        ) {
          playerId
        }
      }
    `,variables:{playerId:c,playerStarred:e}}),await Q()},Z=async()=>{const c=await oe("https://discord.com/api/oauth2/authorize",{prompt:"none",client_id:"886418657616486450",scope:"identify",redirect_uri:"https://ragnarok-analytics.app.aidan.pro/"}).catch(()=>oe("https://discord.com/api/oauth2/authorize",{client_id:"886418657616486450",scope:"identify",redirect_uri:"https://ragnarok-analytics.app.aidan.pro/"}));K.set(c)},K=X(localStorage.getItem("token")),ge=X(new Date),_e=X([]);K.subscribe(c=>localStorage.setItem("token",c));setInterval(()=>ge.set(new Date),1e3);const he=c=>c[0].toUpperCase()+c.substring(1),ft=c=>he(rt(new Date(c))),ut=(c,e)=>he(lt(new Date(e).getTime()-new Date(c).getTime(),{compact:!0}));function ye(c){let e,n;return{c(){e=g("span"),n=M(c[3]),p(e,"class","border rounded-lg px-2")},m(l,t){b(l,e,t),d(e,n)},p(l,t){t&8&&H(n,l[3])},d(l){l&&$(e)}}}function be(c){let e,n;return{c(){e=g("span"),n=M(c[2]),p(e,"class","border rounded-lg px-2")},m(l,t){b(l,e,t),d(e,n)},p(l,t){t&4&&H(n,l[2])},d(l){l&&$(e)}}}function mt(c){let e,n,l=c[0]&&ye(c),t=c[1]&&be(c);return{c(){e=g("div"),l&&l.c(),n=w(),t&&t.c(),p(e,"class","flex flex-row gap-1")},m(s,r){b(s,e,r),l&&l.m(e,null),d(e,n),t&&t.m(e,null)},p(s,[r]){s[0]?l?l.p(s,r):(l=ye(s),l.c(),l.m(e,n)):l&&(l.d(1),l=null),s[1]?t?t.p(s,r):(t=be(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:R,o:R,d(s){s&&$(e),l&&l.d(),t&&t.d()}}}function pt(c,e,n){let l,t,s;W(c,ge,f=>n(6,s=f));let{created:r=!0}=e,{createdAt:i}=e,{duration:a=!0}=e,{completedAt:o}=e;return c.$$set=f=>{"created"in f&&n(0,r=f.created),"createdAt"in f&&n(4,i=f.createdAt),"duration"in f&&n(1,a=f.duration),"completedAt"in f&&n(5,o=f.completedAt)},c.$$.update=()=>{c.$$.dirty&16&&n(3,l=ft(i)),c.$$.dirty&112&&n(2,t=ut(i,o!=null?o:s.toString()))},[r,a,t,l,i,o,s]}class $e extends C{constructor(e){super();S(this,e,pt,mt,T,{created:0,createdAt:4,duration:1,completedAt:5})}}function dt(c){let e,n,l,t,s,r,i=c[0].memberDiscordUsername+"",a;return{c(){e=g("div"),n=g("img"),s=w(),r=g("span"),a=M(i),p(n,"class","rounded-full w-10 h-10"),p(n,"alt",l=c[0].memberDiscordUsername),U(n.src,t=c[0].memberDiscordAvatar)||p(n,"src",t),p(r,"class","overflow-ellipsis"),p(e,"class","flex flex-row items-center gap-2")},m(o,f){b(o,e,f),d(e,n),d(e,s),d(e,r),d(r,a)},p(o,[f]){f&1&&l!==(l=o[0].memberDiscordUsername)&&p(n,"alt",l),f&1&&!U(n.src,t=o[0].memberDiscordAvatar)&&p(n,"src",t),f&1&&i!==(i=o[0].memberDiscordUsername+"")&&H(a,i)},i:R,o:R,d(o){o&&$(e)}}}function gt(c,e,n){let{member:l}=e;return c.$$set=t=>{"member"in t&&n(0,l=t.member)},[l]}class J extends C{constructor(e){super();S(this,e,gt,dt,T,{member:0})}}function _t(c){let e,n,l,t;return{c(){var s;e=g("span"),p(e,"class","block w-8 h-8 bg-center bg-no-repeat bg-contain cursor-pointer svelte-otfjog"),p(e,"data-player-starred",n=(s=c[0])!=null?s:"null")},m(s,r){b(s,e,r),l||(t=Y(e,"click",c[1]),l=!0)},p(s,[r]){var i;r&1&&n!==(n=(i=s[0])!=null?i:"null")&&p(e,"data-player-starred",n)},i:R,o:R,d(s){s&&$(e),l=!1,t()}}}function ht(c,e,n){let{playerId:l}=e,{playerStarred:t}=e;const s=()=>{t===!1&&(de(l,!t),n(0,t=null)),t===!0&&(de(l,!t),n(0,t=null))};return c.$$set=r=>{"playerId"in r&&n(2,l=r.playerId),"playerStarred"in r&&n(0,t=r.playerStarred)},[t,s,l]}class yt extends C{constructor(e){super();S(this,e,ht,_t,T,{playerId:2,playerStarred:0})}}function ve(c,e,n){const l=c.slice();return l[1]=e[n],l}function we(c){let e,n,l,t,s,r;return n=new J({props:{member:c[1].member}}),t=new yt({props:{playerId:c[1].playerId,playerStarred:c[1].playerStarred}}),{c(){e=g("li"),k(n.$$.fragment),l=w(),k(t.$$.fragment),s=w(),p(e,"class","flex-none flex flex-row justify-between")},m(i,a){b(i,e,a),I(n,e,null),d(e,l),I(t,e,null),d(e,s),r=!0},p(i,a){const o={};a&1&&(o.member=i[1].member),n.$set(o);const f={};a&1&&(f.playerId=i[1].playerId),a&1&&(f.playerStarred=i[1].playerStarred),t.$set(f)},i(i){r||(_(n.$$.fragment,i),_(t.$$.fragment,i),r=!0)},o(i){y(n.$$.fragment,i),y(t.$$.fragment,i),r=!1},d(i){i&&$(e),A(n),A(t)}}}function bt(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=we(ve(c,l,r));const s=r=>y(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ue()},m(r,i){for(let a=0;a<t.length;a+=1)t[a].m(r,i);b(r,e,i),n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=ve(r,l,a);t[a]?(t[a].p(o,i),_(t[a],1)):(t[a]=we(o),t[a].c(),_(t[a],1),t[a].m(e.parentNode,e))}for(B(),a=l.length;a<t.length;a+=1)s(a);q()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)_(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(r){j(t,r),r&&$(e)}}}function $t(c,e,n){let{players:l}=e;return c.$$set=t=>{"players"in t&&n(0,l=t.players)},[l]}class ee extends C{constructor(e){super();S(this,e,$t,bt,T,{players:0})}}function vt(c){let e,n,l,t=c[0].gameId+"",s,r,i,a,o,f,u,m,h,P,D,E,x,O,N,G,te,z,F;return i=new $e({props:{createdAt:c[0].gameCreatedAt,completedAt:c[0].gameCompletedAt,created:!1}}),h=new ee({props:{players:c[3]}}),O=new ee({props:{players:c[2]}}),z=new ee({props:{players:c[1]}}),{c(){e=g("div"),n=g("span"),l=M("Game "),s=M(t),r=w(),k(i.$$.fragment),a=w(),o=g("div"),f=g("span"),f.textContent="Spectators",u=w(),m=g("ul"),k(h.$$.fragment),P=w(),D=g("div"),E=g("ul"),x=M(`Team 1
    `),k(O.$$.fragment),N=w(),G=g("ul"),te=M(`Team 2
    `),k(z.$$.fragment),p(e,"class","flex flex-row justify-between"),p(f,"class","block mb-4"),p(m,"class","flex flex-row flex-wrap gap-2"),p(o,"class","border rounded-lg p-2 my-2"),p(E,"class","flex flex-col gap-2 border rounded-lg p-2 my-2 w-1/2"),p(G,"class","flex flex-col gap-2 border rounded-lg p-2 my-2 w-1/2"),p(D,"class","flex flex-row gap-4")},m(v,L){b(v,e,L),d(e,n),d(n,l),d(n,s),d(e,r),I(i,e,null),b(v,a,L),b(v,o,L),d(o,f),d(o,u),d(o,m),I(h,m,null),b(v,P,L),b(v,D,L),d(D,E),d(E,x),I(O,E,null),d(D,N),d(D,G),d(G,te),I(z,G,null),F=!0},p(v,[L]){(!F||L&1)&&t!==(t=v[0].gameId+"")&&H(s,t);const V={};L&1&&(V.createdAt=v[0].gameCreatedAt),L&1&&(V.completedAt=v[0].gameCompletedAt),i.$set(V);const re={};L&8&&(re.players=v[3]),h.$set(re);const le={};L&4&&(le.players=v[2]),O.$set(le);const ne={};L&2&&(ne.players=v[1]),z.$set(ne)},i(v){F||(_(i.$$.fragment,v),_(h.$$.fragment,v),_(O.$$.fragment,v),_(z.$$.fragment,v),F=!0)},o(v){y(i.$$.fragment,v),y(h.$$.fragment,v),y(O.$$.fragment,v),y(z.$$.fragment,v),F=!1},d(v){v&&$(e),A(i),v&&$(a),v&&$(o),A(h),v&&$(P),v&&$(D),A(O),A(z)}}}function wt(c,e,n){let l,t,s,{game:r}=e;return c.$$set=i=>{"game"in i&&n(0,r=i.game)},c.$$.update=()=>{c.$$.dirty&1&&n(3,l=r.players.filter(i=>i.playerTeamId===0)),c.$$.dirty&1&&n(2,t=r.players.filter(i=>i.playerTeamId===1)),c.$$.dirty&1&&n(1,s=r.players.filter(i=>i.playerTeamId===2))},[r,s,t,l]}class kt extends C{constructor(e){super();S(this,e,wt,vt,T,{game:0})}}function ke(c,e,n){const l=c.slice();return l[0]=e[n],l}function Ie(c,e,n){const l=c.slice();return l[4]=e[n],l}function Ae(c){let e,n;return{c(){e=g("img"),U(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",n)},m(l,t){b(l,e,t)},p(l,t){t&1&&!U(e.src,n="./game-"+(l[4].playerTeamId===0?"spectated":"played")+".svg")&&p(e,"src",n)},d(l){l&&$(e)}}}function xe(c){let e,n,l,t,s,r;n=new J({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Ae(Ie(c,i,o));return{c(){e=g("div"),k(n.$$.fragment),l=w(),t=g("div");for(let o=0;o<a.length;o+=1)a[o].c();s=w(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){b(o,e,f),I(n,e,null),d(e,l),d(e,t);for(let u=0;u<a.length;u+=1)a[u].m(t,null);d(e,s),r=!0},p(o,f){const u={};if(f&1&&(u.member=o[0].member),n.$set(u),f&1){i=o[0].players;let m;for(m=0;m<i.length;m+=1){const h=Ie(o,i,m);a[m]?a[m].p(h,f):(a[m]=Ae(h),a[m].c(),a[m].m(t,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=i.length}},i(o){r||(_(n.$$.fragment,o),r=!0)},o(o){y(n.$$.fragment,o),r=!1},d(o){o&&$(e),A(n),j(a,o)}}}function It(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=xe(ke(c,l,r));const s=r=>y(t[r],1,1,()=>{t[r]=null});return{c(){e=g("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","grid gap-2")},m(r,i){b(r,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=ke(r,l,a);t[a]?(t[a].p(o,i),_(t[a],1)):(t[a]=xe(o),t[a].c(),_(t[a],1),t[a].m(e,null))}for(B(),a=l.length;a<t.length;a+=1)s(a);q()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)_(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(r){r&&$(e),j(t,r)}}}function At(c,e,n){let l,{players:t}=e;return c.$$set=s=>{"players"in s&&n(1,t=s.players)},c.$$.update=()=>{c.$$.dirty&3&&n(0,l=Object.values(t.sort((s,r)=>new Date(s.playerCreatedAt).getTime()-new Date(r.playerCreatedAt).getTime()).reduce((s,r)=>{var i,a;return(a=s[i=r.memberId])!=null||(s[i]={member:r.member,players:[]}),s[r.memberId].players.push(r),s},{})).sort((s,r)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,a=r.players.filter(o=>o.playerTeamId===0).length/r.players.length;if(i===a)return 0;if(i>a)return 1;if(i<a)return-1}))},[l,t]}class xt extends C{constructor(e){super();S(this,e,At,It,T,{players:1})}}function Ce(c,e,n){const l=c.slice();return l[0]=e[n],l}function Se(c,e,n){const l=c.slice();return l[4]=e[n],l}function Te(c){let e,n;return{c(){e=g("img"),U(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",n)},m(l,t){b(l,e,t)},p(l,t){t&1&&!U(e.src,n="./game-"+(l[4].playerTeamId===0?"spectated":"played")+".svg")&&p(e,"src",n)},d(l){l&&$(e)}}}function De(c){let e,n,l,t,s,r;n=new J({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Te(Se(c,i,o));return{c(){e=g("div"),k(n.$$.fragment),l=w(),t=g("div");for(let o=0;o<a.length;o+=1)a[o].c();s=w(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){b(o,e,f),I(n,e,null),d(e,l),d(e,t);for(let u=0;u<a.length;u+=1)a[u].m(t,null);d(e,s),r=!0},p(o,f){const u={};if(f&1&&(u.member=o[0].member),n.$set(u),f&1){i=o[0].players;let m;for(m=0;m<i.length;m+=1){const h=Se(o,i,m);a[m]?a[m].p(h,f):(a[m]=Te(h),a[m].c(),a[m].m(t,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=i.length}},i(o){r||(_(n.$$.fragment,o),r=!0)},o(o){y(n.$$.fragment,o),r=!1},d(o){o&&$(e),A(n),j(a,o)}}}function Ct(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=De(Ce(c,l,r));const s=r=>y(t[r],1,1,()=>{t[r]=null});return{c(){e=g("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","grid gap-2")},m(r,i){b(r,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=Ce(r,l,a);t[a]?(t[a].p(o,i),_(t[a],1)):(t[a]=De(o),t[a].c(),_(t[a],1),t[a].m(e,null))}for(B(),a=l.length;a<t.length;a+=1)s(a);q()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)_(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(r){r&&$(e),j(t,r)}}}function St(c,e,n){let l,{players:t}=e;return c.$$set=s=>{"players"in s&&n(1,t=s.players)},c.$$.update=()=>{c.$$.dirty&3&&n(0,l=Object.values(t.sort((s,r)=>new Date(s.playerCreatedAt).getTime()-new Date(r.playerCreatedAt).getTime()).reduce((s,r)=>{var i,a;return(a=s[i=r.memberId])!=null||(s[i]={member:r.member,players:[]}),s[r.memberId].players.push(r),s[r.memberId].players=s[r.memberId].players.slice(-3),s},{})).filter(s=>!(s.players.filter(i=>i.playerTeamId===0).length/s.players.length<.5)).sort((s,r)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,a=r.players.filter(o=>o.playerTeamId===0).length/r.players.length;if(i===a)return 0;if(i>a)return-1;if(i<a)return 1}))},[l,t]}class Tt extends C{constructor(e){super();S(this,e,St,Ct,T,{players:1})}}function Pe(c,e,n){const l=c.slice();return l[0]=e[n],l}function Oe(c,e,n){const l=c.slice();return l[4]=e[n],l}function Le(c){let e,n;return{c(){e=g("img"),U(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||p(e,"src",n)},m(l,t){b(l,e,t)},p(l,t){t&1&&!U(e.src,n="./game-"+(l[4].playerTeamId===0?"spectated":"played")+".svg")&&p(e,"src",n)},d(l){l&&$(e)}}}function Re(c){let e,n,l,t,s,r;n=new J({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Le(Oe(c,i,o));return{c(){e=g("div"),k(n.$$.fragment),l=w(),t=g("div");for(let o=0;o<a.length;o+=1)a[o].c();s=w(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,f){b(o,e,f),I(n,e,null),d(e,l),d(e,t);for(let u=0;u<a.length;u+=1)a[u].m(t,null);d(e,s),r=!0},p(o,f){const u={};if(f&1&&(u.member=o[0].member),n.$set(u),f&1){i=o[0].players;let m;for(m=0;m<i.length;m+=1){const h=Oe(o,i,m);a[m]?a[m].p(h,f):(a[m]=Le(h),a[m].c(),a[m].m(t,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=i.length}},i(o){r||(_(n.$$.fragment,o),r=!0)},o(o){y(n.$$.fragment,o),r=!1},d(o){o&&$(e),A(n),j(a,o)}}}function Dt(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=Re(Pe(c,l,r));const s=r=>y(t[r],1,1,()=>{t[r]=null});return{c(){e=g("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","grid gap-2")},m(r,i){b(r,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=Pe(r,l,a);t[a]?(t[a].p(o,i),_(t[a],1)):(t[a]=Re(o),t[a].c(),_(t[a],1),t[a].m(e,null))}for(B(),a=l.length;a<t.length;a+=1)s(a);q()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)_(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(r){r&&$(e),j(t,r)}}}function Pt(c,e,n){let l,{players:t}=e;return c.$$set=s=>{"players"in s&&n(1,t=s.players)},c.$$.update=()=>{c.$$.dirty&3&&n(0,l=Object.values(t.filter(s=>s.playerTeamId===0).sort((s,r)=>new Date(s.playerCreatedAt).getTime()-new Date(r.playerCreatedAt).getTime()).reduce((s,r)=>{var i,a;return(a=s[i=r.memberId])!=null||(s[i]={member:r.member,players:[]}),s[r.memberId].players.push(r),s},{})).sort((s,r)=>{const i=s.players.length,a=r.players.length;if(i===a)return 0;if(i>a)return-1;if(i<a)return 1}))},[l,t]}class Ot extends C{constructor(e){super();S(this,e,Pt,Dt,T,{players:1})}}function Lt(c){let e,n;return{c(){var l;e=g("span"),p(e,"class","block w-8 h-8 bg-center bg-no-repeat bg-contain svelte-7gdy3i"),p(e,"data-player-starred",n=(l=c[0])!=null?l:"null")},m(l,t){b(l,e,t)},p(l,[t]){var s;t&1&&n!==(n=(s=l[0])!=null?s:"null")&&p(e,"data-player-starred",n)},i:R,o:R,d(l){l&&$(e)}}}function Rt(c,e,n){let{playerStarred:l}=e;return c.$$set=t=>{"playerStarred"in t&&n(0,l=t.playerStarred)},[l]}class jt extends C{constructor(e){super();S(this,e,Rt,Lt,T,{playerStarred:0})}}function je(c,e,n){const l=c.slice();return l[0]=e[n],l}function Be(c,e,n){const l=c.slice();return l[4]=e[n],l}function qe(c){let e,n;return e=new jt({props:{playerStarred:c[4].playerStarred}}),{c(){k(e.$$.fragment)},m(l,t){I(e,l,t),n=!0},p(l,t){const s={};t&1&&(s.playerStarred=l[4].playerStarred),e.$set(s)},i(l){n||(_(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Me(c){let e,n,l,t,s,r;n=new J({props:{member:c[0].member}});let i=c[0].players,a=[];for(let f=0;f<i.length;f+=1)a[f]=qe(Be(c,i,f));const o=f=>y(a[f],1,1,()=>{a[f]=null});return{c(){e=g("div"),k(n.$$.fragment),l=w(),t=g("div");for(let f=0;f<a.length;f+=1)a[f].c();s=w(),p(t,"class","flex flex-row"),p(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(f,u){b(f,e,u),I(n,e,null),d(e,l),d(e,t);for(let m=0;m<a.length;m+=1)a[m].m(t,null);d(e,s),r=!0},p(f,u){const m={};if(u&1&&(m.member=f[0].member),n.$set(m),u&1){i=f[0].players;let h;for(h=0;h<i.length;h+=1){const P=Be(f,i,h);a[h]?(a[h].p(P,u),_(a[h],1)):(a[h]=qe(P),a[h].c(),_(a[h],1),a[h].m(t,null))}for(B(),h=i.length;h<a.length;h+=1)o(h);q()}},i(f){if(!r){_(n.$$.fragment,f);for(let u=0;u<i.length;u+=1)_(a[u]);r=!0}},o(f){y(n.$$.fragment,f),a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)y(a[u]);r=!1},d(f){f&&$(e),A(n),j(a,f)}}}function Bt(c){let e,n,l=c[0],t=[];for(let r=0;r<l.length;r+=1)t[r]=Me(je(c,l,r));const s=r=>y(t[r],1,1,()=>{t[r]=null});return{c(){e=g("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","grid gap-2")},m(r,i){b(r,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(r,[i]){if(i&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const o=je(r,l,a);t[a]?(t[a].p(o,i),_(t[a],1)):(t[a]=Me(o),t[a].c(),_(t[a],1),t[a].m(e,null))}for(B(),a=l.length;a<t.length;a+=1)s(a);q()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)_(t[i]);n=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(r){r&&$(e),j(t,r)}}}function qt(c,e,n){let l,{players:t}=e;return c.$$set=s=>{"players"in s&&n(1,t=s.players)},c.$$.update=()=>{c.$$.dirty&3&&n(0,l=Object.values(t.filter(s=>s.playerStarred).sort((s,r)=>new Date(s.playerCreatedAt).getTime()-new Date(r.playerCreatedAt).getTime()).reduce((s,r)=>{var i,a;return(a=s[i=r.memberId])!=null||(s[i]={member:r.member,players:[]}),s[r.memberId].players.push(r),s},{})).sort((s,r)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,a=r.players.filter(o=>o.playerTeamId===0).length/r.players.length;if(i===a)return 0;if(i>a)return 1;if(i<a)return-1}))},[l,t]}class Mt extends C{constructor(e){super();S(this,e,qt,Bt,T,{players:1})}}function Et(c){let e,n,l,t,s,r,i,a,o,f,u,m,h,P;var D=c[2];function E(x){return{props:{players:x[0]}}}return D&&(u=new D(E(c))),{c(){e=g("div"),n=g("div"),l=g("span"),l.textContent="Overview",t=w(),s=g("select"),r=g("option"),r.textContent="History",i=g("option"),i.textContent="Recently Spectated",a=g("option"),a.textContent="Most Spectated",o=g("option"),o.textContent="Stars",f=w(),u&&k(u.$$.fragment),p(l,"class","text-lg mb-2 block"),r.__value="history",r.value=r.__value,i.__value="recently-spectated",i.value=i.__value,a.__value="most-spectated",a.value=a.__value,o.__value="stars",o.value=o.__value,p(s,"class","border rounded-lg py-2 dark:bg-black"),c[1]===void 0&&nt(()=>c[3].call(s)),p(n,"class","flex flex-row justify-between"),p(e,"class","border rounded-lg p-4 mt-2")},m(x,O){b(x,e,O),d(e,n),d(n,l),d(n,t),d(n,s),d(s,r),d(s,i),d(s,a),d(s,o),me(s,c[1]),d(e,f),u&&I(u,e,null),m=!0,h||(P=Y(s,"change",c[3]),h=!0)},p(x,[O]){O&2&&me(s,x[1]);const N={};if(O&1&&(N.players=x[0]),D!==(D=x[2])){if(u){B();const G=u;y(G.$$.fragment,1,0,()=>{A(G,1)}),q()}D?(u=new D(E(x)),k(u.$$.fragment),_(u.$$.fragment,1),I(u,e,null)):u=null}else D&&u.$set(N)},i(x){m||(u&&_(u.$$.fragment,x),m=!0)},o(x){u&&y(u.$$.fragment,x),m=!1},d(x){x&&$(e),u&&A(u),h=!1,P()}}}function Gt(c,e,n){let{players:l}=e,t="history",s;function r(){t=at(this),n(1,t)}return c.$$set=i=>{"players"in i&&n(0,l=i.players)},c.$$.update=()=>{if(c.$$.dirty&2)switch(t){case"history":n(2,s=xt);break;case"recently-spectated":n(2,s=Tt);break;case"most-spectated":n(2,s=Ot);break;case"stars":n(2,s=Mt);break}},[l,t,s,r]}class Ut extends C{constructor(e){super();S(this,e,Gt,Et,T,{players:0})}}function Ee(c,e,n){const l=c.slice();return l[2]=e[n],l}function Ge(c){let e,n,l,t;return n=new kt({props:{game:c[2]}}),{c(){e=g("li"),k(n.$$.fragment),l=w(),p(e,"class","border rounded-md p-2")},m(s,r){b(s,e,r),I(n,e,null),d(e,l),t=!0},p(s,r){const i={};r&1&&(i.game=s[2]),n.$set(i)},i(s){t||(_(n.$$.fragment,s),t=!0)},o(s){y(n.$$.fragment,s),t=!1},d(s){s&&$(e),A(n)}}}function zt(c){let e,n,l,t;e=new Ut({props:{players:c[1]}});let s=c[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=Ge(Ee(c,s,a));const i=a=>y(r[a],1,1,()=>{r[a]=null});return{c(){k(e.$$.fragment),n=w(),l=g("ul");for(let a=0;a<r.length;a+=1)r[a].c();p(l,"class","mt-12 flex flex-col gap-12")},m(a,o){I(e,a,o),b(a,n,o),b(a,l,o);for(let f=0;f<r.length;f+=1)r[f].m(l,null);t=!0},p(a,[o]){const f={};if(o&2&&(f.players=a[1]),e.$set(f),o&1){s=a[0];let u;for(u=0;u<s.length;u+=1){const m=Ee(a,s,u);r[u]?(r[u].p(m,o),_(r[u],1)):(r[u]=Ge(m),r[u].c(),_(r[u],1),r[u].m(l,null))}for(B(),u=s.length;u<r.length;u+=1)i(u);q()}},i(a){if(!t){_(e.$$.fragment,a);for(let o=0;o<s.length;o+=1)_(r[o]);t=!0}},o(a){y(e.$$.fragment,a),r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)y(r[o]);t=!1},d(a){A(e,a),a&&$(n),a&&$(l),j(r,a)}}}function Nt(c,e,n){let l,{games:t}=e;return c.$$set=s=>{"games"in s&&n(0,t=s.games)},c.$$.update=()=>{c.$$.dirty&1&&n(1,l=t.flatMap(s=>s.players))},[t,l]}class Ft extends C{constructor(e){super();S(this,e,Nt,zt,T,{games:0})}}function Ht(c){let e,n,l,t=c[0].eventId+"",s,r,i,a,o,f;return i=new $e({props:{createdAt:c[0].eventCreatedAt,completedAt:c[0].eventCompletedAt}}),o=new Ft({props:{games:c[1]}}),{c(){e=g("div"),n=g("span"),l=M("Ragnarok Event "),s=M(t),r=w(),k(i.$$.fragment),a=w(),k(o.$$.fragment),p(n,"class","whitespace-nowrap text-lg"),p(e,"class","flex flex-row justify-between")},m(u,m){b(u,e,m),d(e,n),d(n,l),d(n,s),d(e,r),I(i,e,null),b(u,a,m),I(o,u,m),f=!0},p(u,[m]){(!f||m&1)&&t!==(t=u[0].eventId+"")&&H(s,t);const h={};m&1&&(h.createdAt=u[0].eventCreatedAt),m&1&&(h.completedAt=u[0].eventCompletedAt),i.$set(h);const P={};m&2&&(P.games=u[1]),o.$set(P)},i(u){f||(_(i.$$.fragment,u),_(o.$$.fragment,u),f=!0)},o(u){y(i.$$.fragment,u),y(o.$$.fragment,u),f=!1},d(u){u&&$(e),A(i),u&&$(a),A(o,u)}}}function Kt(c,e,n){let l,{event:t}=e;return c.$$set=s=>{"event"in s&&n(0,t=s.event)},c.$$.update=()=>{c.$$.dirty&1&&n(1,l=[...t.games].sort((s,r)=>new Date(r.gameCreatedAt).getTime()-new Date(s.gameCreatedAt).getTime()))},[t,l]}class Jt extends C{constructor(e){super();S(this,e,Kt,Ht,T,{event:0})}}function Ue(c,e,n){const l=c.slice();return l[1]=e[n],l}function ze(c){let e,n,l;return n=new Jt({props:{event:c[1]}}),{c(){e=g("li"),k(n.$$.fragment),p(e,"class","border rounded-md px-8 py-6")},m(t,s){b(t,e,s),I(n,e,null),l=!0},p(t,s){const r={};s&1&&(r.event=t[1]),n.$set(r)},i(t){l||(_(n.$$.fragment,t),l=!0)},o(t){y(n.$$.fragment,t),l=!1},d(t){t&&$(e),A(n)}}}function Wt(c){let e,n,l,t,s=c[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=ze(Ue(c,s,a));const i=a=>y(r[a],1,1,()=>{r[a]=null});return{c(){e=g("ul");for(let a=0;a<r.length;a+=1)r[a].c();n=w(),l=g("li"),p(e,"class","container mx-auto flex flex-col gap-20 mt-6")},m(a,o){b(a,e,o);for(let f=0;f<r.length;f+=1)r[f].m(e,null);d(e,n),d(e,l),t=!0},p(a,[o]){if(o&1){s=a[0];let f;for(f=0;f<s.length;f+=1){const u=Ue(a,s,f);r[f]?(r[f].p(u,o),_(r[f],1)):(r[f]=ze(u),r[f].c(),_(r[f],1),r[f].m(e,n))}for(B(),f=s.length;f<r.length;f+=1)i(f);q()}},i(a){if(!t){for(let o=0;o<s.length;o+=1)_(r[o]);t=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)y(r[o]);t=!1},d(a){a&&$(e),j(r,a)}}}function Qt(c,e,n){let{events:l}=e;return c.$$set=t=>{"events"in t&&n(0,l=t.events)},[l]}class Vt extends C{constructor(e){super();S(this,e,Qt,Wt,T,{events:0})}}function Xt(c){let e,n;return e=new Vt({props:{events:c[0]}}),{c(){k(e.$$.fragment)},m(l,t){I(e,l,t),n=!0},p(l,[t]){const s={};t&1&&(s.events=l[0]),e.$set(s)},i(l){n||(_(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Yt(c,e,n){let l;return W(c,_e,t=>n(0,l=t)),Q(),setInterval(()=>Q(),1e3*15),[l]}class Zt extends C{constructor(e){super();S(this,e,Yt,Xt,T,{})}}function Ne(c){let e,n,l;return{c(){e=g("button"),e.textContent="Login",p(e,"class","ml-auto border rounded-lg px-4 py-2")},m(t,s){b(t,e,s),n||(l=Y(e,"click",Z),n=!0)},p:R,d(t){t&&$(e),n=!1,l()}}}function er(c){let e,n,l,t=!c[0]&&Ne();return{c(){e=g("nav"),n=g("span"),n.textContent="Ragnarok Analytics",l=w(),t&&t.c(),p(n,"class","inline-flex items-center"),p(e,"class","flex flex-row border-b p-4")},m(s,r){b(s,e,r),d(e,n),d(e,l),t&&t.m(e,null)},p(s,[r]){s[0]?t&&(t.d(1),t=null):t?t.p(s,r):(t=Ne(),t.c(),t.m(e,null))},i:R,o:R,d(s){s&&$(e),t&&t.d()}}}function tr(c,e,n){let l;return W(c,K,t=>n(0,l=t)),l||Z(),[l]}class rr extends C{constructor(e){super();S(this,e,tr,er,T,{})}}function Fe(c){let e,n;return e=new Zt({}),{c(){k(e.$$.fragment)},m(l,t){I(e,l,t),n=!0},i(l){n||(_(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function lr(c){let e,n,l,t;e=new rr({});let s=c[0]&&Fe();return{c(){k(e.$$.fragment),n=w(),s&&s.c(),l=ue()},m(r,i){I(e,r,i),b(r,n,i),s&&s.m(r,i),b(r,l,i),t=!0},p(r,[i]){r[0]?s?i&1&&_(s,1):(s=Fe(),s.c(),_(s,1),s.m(l.parentNode,l)):s&&(B(),y(s,1,1,()=>{s=null}),q())},i(r){t||(_(e.$$.fragment,r),_(s),t=!0)},o(r){y(e.$$.fragment,r),y(s),t=!1},d(r){A(e,r),r&&$(n),s&&s.d(r),r&&$(l)}}}function nr(c,e,n){let l;return W(c,K,t=>n(0,l=t)),[l]}class ar extends C{constructor(e){super();S(this,e,nr,lr,T,{})}}st();addEventListener("load",()=>{new ar({target:document.querySelector("#application")})});
