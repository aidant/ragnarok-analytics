var Ue=Object.defineProperty,ze=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var se=(c,e,n)=>e in c?Ue(c,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[e]=n,ce=(c,e)=>{for(var n in e||(e={}))Fe.call(e,n)&&se(c,n,e[n]);if(ae)for(var n of ae(e))He.call(e,n)&&se(c,n,e[n]);return c},ie=(c,e)=>ze(c,Ne(e));import{H as Ke,A as Je,g as We,a as Qe,I as Ve,c as Xe,w as X,b as oe,d as fe,s as Ye,p as Ze,S as x,i as C,e as T,f as p,t as j,h as d,j as _,k as m,l as F,m as h,n as v,o as P,q as J,r as H,u as Y,v as k,x as I,y as g,z as y,B as A,C as ue,D as B,E as M,F as q,G as et,J as me,K as tt,L as lt}from"./vendor.ceab2bca.js";const rt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}};rt();const nt=new Ke({uri:"https://ragnarok-analytics.api.aidan.pro/"}),at=new Je((c,e)=>(c.setContext(({headers:n={}})=>({headers:ie(ce({},n),{Authorization:We(K)})})),e(c))),de=new Qe({cache:new Ve,link:Xe(at,nt)}),W=({retry:c=!0}={})=>de.query({fetchPolicy:"network-only",query:fe`
        query {
          events(orderBy: { eventCreatedAt: desc }) {
            eventId
            eventLabel
            eventCreatedAt
            eventCompletedAt

            games {
              eventId
              gameId
              gameMap
              gameWinningTeamId
              gameCreatedAt
              gameCompletedAt

              players {
                gameId
                memberId
                playerId
                playerTeamId
                playerCreatedAt
                playerStarred

                member {
                  memberId
                  memberDiscordId
                  memberDiscordAvatar
                  memberDiscordUsername
                }
              }
            }
          }
        }
      `}).then(e=>_e.set(e.data.events),async e=>{if(c)return await Z(),W({retry:!1});throw e}),pe=async(c,e)=>{await de.mutate({mutation:fe`
      mutation setPlayerStarred(
        $playerId: Int!
        $playerStarred: Boolean!
      ) {
        updatePlayer(
          data: { playerStarred: { set: $playerStarred } }
          where: { playerId: $playerId }
        ) {
          playerId
        }
      }
    `,variables:{playerId:c,playerStarred:e}}),await W()},Z=async()=>{const c=await oe("https://discord.com/api/oauth2/authorize",{prompt:"none",client_id:"886418657616486450",scope:"identify",redirect_uri:"http://localhost:3000/"}).catch(()=>oe("https://discord.com/api/oauth2/authorize",{client_id:"886418657616486450",scope:"identify",redirect_uri:"http://localhost:3000/"}));K.set(c)},K=X(localStorage.getItem("token")),ge=X(new Date),_e=X([]);K.subscribe(c=>localStorage.setItem("token",c));setInterval(()=>ge.set(new Date),1e3);const he=c=>c[0].toUpperCase()+c.substring(1),st=c=>he(Ye(new Date(c))),ct=(c,e)=>he(Ze(new Date(e).getTime()-new Date(c).getTime(),{compact:!0}));function ye(c){let e,n;return{c(){e=p("span"),n=j(c[3]),d(e,"class","border rounded-lg px-2")},m(r,t){_(r,e,t),m(e,n)},p(r,t){t&8&&F(n,r[3])},d(r){r&&h(e)}}}function be(c){let e,n;return{c(){e=p("span"),n=j(c[2]),d(e,"class","border rounded-lg px-2")},m(r,t){_(r,e,t),m(e,n)},p(r,t){t&4&&F(n,r[2])},d(r){r&&h(e)}}}function it(c){let e,n,r=c[0]&&ye(c),t=c[1]&&be(c);return{c(){e=p("div"),r&&r.c(),n=v(),t&&t.c(),d(e,"class","flex flex-row gap-1")},m(s,l){_(s,e,l),r&&r.m(e,null),m(e,n),t&&t.m(e,null)},p(s,[l]){s[0]?r?r.p(s,l):(r=ye(s),r.c(),r.m(e,n)):r&&(r.d(1),r=null),s[1]?t?t.p(s,l):(t=be(s),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:P,o:P,d(s){s&&h(e),r&&r.d(),t&&t.d()}}}function ot(c,e,n){let r,t,s;J(c,ge,u=>n(6,s=u));let{created:l=!0}=e,{createdAt:i}=e,{duration:a=!0}=e,{completedAt:o}=e;return c.$$set=u=>{"created"in u&&n(0,l=u.created),"createdAt"in u&&n(4,i=u.createdAt),"duration"in u&&n(1,a=u.duration),"completedAt"in u&&n(5,o=u.completedAt)},c.$$.update=()=>{c.$$.dirty&16&&n(3,r=st(i)),c.$$.dirty&112&&n(2,t=ct(i,o!=null?o:s.toString()))},[l,a,t,r,i,o,s]}class $e extends x{constructor(e){super();C(this,e,ot,it,T,{created:0,createdAt:4,duration:1,completedAt:5})}}function ft(c){let e,n,r,t,s,l,i=c[0].memberDiscordUsername+"",a;return{c(){e=p("div"),n=p("img"),s=v(),l=p("span"),a=j(i),d(n,"class","rounded-full w-10 h-10"),d(n,"alt",r=c[0].memberDiscordUsername),H(n.src,t=c[0].memberDiscordAvatar)||d(n,"src",t),d(l,"class","overflow-ellipsis"),d(e,"class","flex flex-row items-center gap-2")},m(o,u){_(o,e,u),m(e,n),m(e,s),m(e,l),m(l,a)},p(o,[u]){u&1&&r!==(r=o[0].memberDiscordUsername)&&d(n,"alt",r),u&1&&!H(n.src,t=o[0].memberDiscordAvatar)&&d(n,"src",t),u&1&&i!==(i=o[0].memberDiscordUsername+"")&&F(a,i)},i:P,o:P,d(o){o&&h(e)}}}function ut(c,e,n){let{member:r}=e;return c.$$set=t=>{"member"in t&&n(0,r=t.member)},[r]}class Q extends x{constructor(e){super();C(this,e,ut,ft,T,{member:0})}}function mt(c){let e,n,r,t;return{c(){var s;e=p("span"),d(e,"class","block w-8 h-8 bg-center bg-no-repeat bg-contain cursor-pointer svelte-otfjog"),d(e,"data-player-starred",n=(s=c[0])!=null?s:"null")},m(s,l){_(s,e,l),r||(t=Y(e,"click",c[1]),r=!0)},p(s,[l]){var i;l&1&&n!==(n=(i=s[0])!=null?i:"null")&&d(e,"data-player-starred",n)},i:P,o:P,d(s){s&&h(e),r=!1,t()}}}function dt(c,e,n){let{playerId:r}=e,{playerStarred:t}=e;const s=()=>{t===!1&&(pe(r,!t),n(0,t=null)),t===!0&&(pe(r,!t),n(0,t=null))};return c.$$set=l=>{"playerId"in l&&n(2,r=l.playerId),"playerStarred"in l&&n(0,t=l.playerStarred)},[t,s,r]}class pt extends x{constructor(e){super();C(this,e,dt,mt,T,{playerId:2,playerStarred:0})}}function ve(c,e,n){const r=c.slice();return r[1]=e[n],r}function we(c){let e,n,r,t,s,l;return n=new Q({props:{member:c[1].member}}),t=new pt({props:{playerId:c[1].playerId,playerStarred:c[1].playerStarred}}),{c(){e=p("li"),k(n.$$.fragment),r=v(),k(t.$$.fragment),s=v(),d(e,"class","flex-none flex flex-row justify-between")},m(i,a){_(i,e,a),I(n,e,null),m(e,r),I(t,e,null),m(e,s),l=!0},p(i,a){const o={};a&1&&(o.member=i[1].member),n.$set(o);const u={};a&1&&(u.playerId=i[1].playerId),a&1&&(u.playerStarred=i[1].playerStarred),t.$set(u)},i(i){l||(g(n.$$.fragment,i),g(t.$$.fragment,i),l=!0)},o(i){y(n.$$.fragment,i),y(t.$$.fragment,i),l=!1},d(i){i&&h(e),A(n),A(t)}}}function gt(c){let e,n,r=c[0],t=[];for(let l=0;l<r.length;l+=1)t[l]=we(ve(c,r,l));const s=l=>y(t[l],1,1,()=>{t[l]=null});return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ue()},m(l,i){for(let a=0;a<t.length;a+=1)t[a].m(l,i);_(l,e,i),n=!0},p(l,[i]){if(i&1){r=l[0];let a;for(a=0;a<r.length;a+=1){const o=ve(l,r,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=we(o),t[a].c(),g(t[a],1),t[a].m(e.parentNode,e))}for(B(),a=r.length;a<t.length;a+=1)s(a);M()}},i(l){if(!n){for(let i=0;i<r.length;i+=1)g(t[i]);n=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(l){q(t,l),l&&h(e)}}}function _t(c,e,n){let{players:r}=e;return c.$$set=t=>{"players"in t&&n(0,r=t.players)},[r]}class ee extends x{constructor(e){super();C(this,e,_t,gt,T,{players:0})}}function ht(c){let e,n,r,t=c[0].gameId+"",s,l,i,a,o,u,f,b,S,D,O,w,E,R,U,z,te,G,N;return i=new $e({props:{createdAt:c[0].gameCreatedAt,completedAt:c[0].gameCompletedAt,created:!1}}),S=new ee({props:{players:c[3]}}),R=new ee({props:{players:c[2]}}),G=new ee({props:{players:c[1]}}),{c(){e=p("div"),n=p("span"),r=j("Game "),s=j(t),l=v(),k(i.$$.fragment),a=v(),o=p("div"),u=p("span"),u.textContent="Spectators",f=v(),b=p("ul"),k(S.$$.fragment),D=v(),O=p("div"),w=p("ul"),E=j(`Team 1
    `),k(R.$$.fragment),U=v(),z=p("ul"),te=j(`Team 2
    `),k(G.$$.fragment),d(e,"class","flex flex-row justify-between"),d(u,"class","block mb-4"),d(b,"class","flex flex-row flex-wrap gap-2"),d(o,"class","border rounded-lg p-2 my-2"),d(w,"class","flex flex-col gap-2 border rounded-lg p-2 my-2 w-1/2"),d(z,"class","flex flex-col gap-2 border rounded-lg p-2 my-2 w-1/2"),d(O,"class","flex flex-row gap-4")},m($,L){_($,e,L),m(e,n),m(n,r),m(n,s),m(e,l),I(i,e,null),_($,a,L),_($,o,L),m(o,u),m(o,f),m(o,b),I(S,b,null),_($,D,L),_($,O,L),m(O,w),m(w,E),I(R,w,null),m(O,U),m(O,z),m(z,te),I(G,z,null),N=!0},p($,[L]){(!N||L&1)&&t!==(t=$[0].gameId+"")&&F(s,t);const V={};L&1&&(V.createdAt=$[0].gameCreatedAt),L&1&&(V.completedAt=$[0].gameCompletedAt),i.$set(V);const le={};L&8&&(le.players=$[3]),S.$set(le);const re={};L&4&&(re.players=$[2]),R.$set(re);const ne={};L&2&&(ne.players=$[1]),G.$set(ne)},i($){N||(g(i.$$.fragment,$),g(S.$$.fragment,$),g(R.$$.fragment,$),g(G.$$.fragment,$),N=!0)},o($){y(i.$$.fragment,$),y(S.$$.fragment,$),y(R.$$.fragment,$),y(G.$$.fragment,$),N=!1},d($){$&&h(e),A(i),$&&h(a),$&&h(o),A(S),$&&h(D),$&&h(O),A(R),A(G)}}}function yt(c,e,n){let r,t,s,{game:l}=e;return c.$$set=i=>{"game"in i&&n(0,l=i.game)},c.$$.update=()=>{c.$$.dirty&1&&n(3,r=l.players.filter(i=>i.playerTeamId===0)),c.$$.dirty&1&&n(2,t=l.players.filter(i=>i.playerTeamId===1)),c.$$.dirty&1&&n(1,s=l.players.filter(i=>i.playerTeamId===2))},[l,s,t,r]}class bt extends x{constructor(e){super();C(this,e,yt,ht,T,{game:0})}}function ke(c,e,n){const r=c.slice();return r[0]=e[n],r}function Ie(c,e,n){const r=c.slice();return r[4]=e[n],r}function Ae(c){let e,n;return{c(){e=p("img"),H(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||d(e,"src",n)},m(r,t){_(r,e,t)},p:P,d(r){r&&h(e)}}}function xe(c){let e,n,r,t,s,l;n=new Q({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Ae(Ie(c,i,o));return{c(){e=p("div"),k(n.$$.fragment),r=v(),t=p("div");for(let o=0;o<a.length;o+=1)a[o].c();s=v(),d(t,"class","flex flex-row"),d(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,u){_(o,e,u),I(n,e,null),m(e,r),m(e,t);for(let f=0;f<a.length;f+=1)a[f].m(t,null);m(e,s),l=!0},p(o,u){if(u&1){i=o[0].players;let f;for(f=0;f<i.length;f+=1){const b=Ie(o,i,f);a[f]?a[f].p(b,u):(a[f]=Ae(b),a[f].c(),a[f].m(t,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}},i(o){l||(g(n.$$.fragment,o),l=!0)},o(o){y(n.$$.fragment,o),l=!1},d(o){o&&h(e),A(n),q(a,o)}}}function $t(c){let e,n,r=c[0],t=[];for(let l=0;l<r.length;l+=1)t[l]=xe(ke(c,r,l));const s=l=>y(t[l],1,1,()=>{t[l]=null});return{c(){e=p("div");for(let l=0;l<t.length;l+=1)t[l].c();d(e,"class","grid gap-2")},m(l,i){_(l,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(l,[i]){if(i&1){r=l[0];let a;for(a=0;a<r.length;a+=1){const o=ke(l,r,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=xe(o),t[a].c(),g(t[a],1),t[a].m(e,null))}for(B(),a=r.length;a<t.length;a+=1)s(a);M()}},i(l){if(!n){for(let i=0;i<r.length;i+=1)g(t[i]);n=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(l){l&&h(e),q(t,l)}}}function vt(c,e,n){let{players:r}=e;const t=Object.values(r.sort((s,l)=>new Date(s.playerCreatedAt).getTime()-new Date(l.playerCreatedAt).getTime()).reduce((s,l)=>{var i,a;return(a=s[i=l.memberId])!=null||(s[i]={member:l.member,players:[]}),s[l.memberId].players.push(l),s},{})).sort((s,l)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,a=l.players.filter(o=>o.playerTeamId===0).length/l.players.length;if(i===a)return 0;if(i>a)return 1;if(i<a)return-1});return c.$$set=s=>{"players"in s&&n(1,r=s.players)},[t,r]}class wt extends x{constructor(e){super();C(this,e,vt,$t,T,{players:1})}}function Ce(c,e,n){const r=c.slice();return r[0]=e[n],r}function Te(c,e,n){const r=c.slice();return r[4]=e[n],r}function Se(c){let e,n;return{c(){e=p("img"),H(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||d(e,"src",n)},m(r,t){_(r,e,t)},p:P,d(r){r&&h(e)}}}function De(c){let e,n,r,t,s,l;n=new Q({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Se(Te(c,i,o));return{c(){e=p("div"),k(n.$$.fragment),r=v(),t=p("div");for(let o=0;o<a.length;o+=1)a[o].c();s=v(),d(t,"class","flex flex-row"),d(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,u){_(o,e,u),I(n,e,null),m(e,r),m(e,t);for(let f=0;f<a.length;f+=1)a[f].m(t,null);m(e,s),l=!0},p(o,u){if(u&1){i=o[0].players;let f;for(f=0;f<i.length;f+=1){const b=Te(o,i,f);a[f]?a[f].p(b,u):(a[f]=Se(b),a[f].c(),a[f].m(t,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}},i(o){l||(g(n.$$.fragment,o),l=!0)},o(o){y(n.$$.fragment,o),l=!1},d(o){o&&h(e),A(n),q(a,o)}}}function kt(c){let e,n,r=c[0],t=[];for(let l=0;l<r.length;l+=1)t[l]=De(Ce(c,r,l));const s=l=>y(t[l],1,1,()=>{t[l]=null});return{c(){e=p("div");for(let l=0;l<t.length;l+=1)t[l].c();d(e,"class","grid gap-2")},m(l,i){_(l,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(l,[i]){if(i&1){r=l[0];let a;for(a=0;a<r.length;a+=1){const o=Ce(l,r,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=De(o),t[a].c(),g(t[a],1),t[a].m(e,null))}for(B(),a=r.length;a<t.length;a+=1)s(a);M()}},i(l){if(!n){for(let i=0;i<r.length;i+=1)g(t[i]);n=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(l){l&&h(e),q(t,l)}}}function It(c,e,n){let{players:r}=e;const t=Object.values(r.sort((s,l)=>new Date(s.playerCreatedAt).getTime()-new Date(l.playerCreatedAt).getTime()).reduce((s,l)=>{var i,a;return(a=s[i=l.memberId])!=null||(s[i]={member:l.member,players:[]}),s[l.memberId].players.push(l),s[l.memberId].players=s[l.memberId].players.slice(-3),s},{})).filter(s=>!(s.players.filter(i=>i.playerTeamId===0).length/s.players.length<.5)).sort((s,l)=>{const i=s.players.filter(o=>o.playerTeamId===0).length/s.players.length,a=l.players.filter(o=>o.playerTeamId===0).length/l.players.length;if(i===a)return 0;if(i>a)return-1;if(i<a)return 1});return c.$$set=s=>{"players"in s&&n(1,r=s.players)},[t,r]}class At extends x{constructor(e){super();C(this,e,It,kt,T,{players:1})}}function Le(c,e,n){const r=c.slice();return r[0]=e[n],r}function Pe(c,e,n){const r=c.slice();return r[4]=e[n],r}function Oe(c){let e,n;return{c(){e=p("img"),H(e.src,n="./game-"+(c[4].playerTeamId===0?"spectated":"played")+".svg")||d(e,"src",n)},m(r,t){_(r,e,t)},p:P,d(r){r&&h(e)}}}function Re(c){let e,n,r,t,s,l;n=new Q({props:{member:c[0].member}});let i=c[0].players,a=[];for(let o=0;o<i.length;o+=1)a[o]=Oe(Pe(c,i,o));return{c(){e=p("div"),k(n.$$.fragment),r=v(),t=p("div");for(let o=0;o<a.length;o+=1)a[o].c();s=v(),d(t,"class","flex flex-row"),d(e,"class","flex flex-row gap-2 flex-1 min-w-max")},m(o,u){_(o,e,u),I(n,e,null),m(e,r),m(e,t);for(let f=0;f<a.length;f+=1)a[f].m(t,null);m(e,s),l=!0},p(o,u){if(u&1){i=o[0].players;let f;for(f=0;f<i.length;f+=1){const b=Pe(o,i,f);a[f]?a[f].p(b,u):(a[f]=Oe(b),a[f].c(),a[f].m(t,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}},i(o){l||(g(n.$$.fragment,o),l=!0)},o(o){y(n.$$.fragment,o),l=!1},d(o){o&&h(e),A(n),q(a,o)}}}function xt(c){let e,n,r=c[0],t=[];for(let l=0;l<r.length;l+=1)t[l]=Re(Le(c,r,l));const s=l=>y(t[l],1,1,()=>{t[l]=null});return{c(){e=p("div");for(let l=0;l<t.length;l+=1)t[l].c();d(e,"class","grid gap-2")},m(l,i){_(l,e,i);for(let a=0;a<t.length;a+=1)t[a].m(e,null);n=!0},p(l,[i]){if(i&1){r=l[0];let a;for(a=0;a<r.length;a+=1){const o=Le(l,r,a);t[a]?(t[a].p(o,i),g(t[a],1)):(t[a]=Re(o),t[a].c(),g(t[a],1),t[a].m(e,null))}for(B(),a=r.length;a<t.length;a+=1)s(a);M()}},i(l){if(!n){for(let i=0;i<r.length;i+=1)g(t[i]);n=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)y(t[i]);n=!1},d(l){l&&h(e),q(t,l)}}}function Ct(c,e,n){let{players:r}=e;const t=Object.values(r.filter(s=>s.playerTeamId===0).sort((s,l)=>new Date(s.playerCreatedAt).getTime()-new Date(l.playerCreatedAt).getTime()).reduce((s,l)=>{var i,a;return(a=s[i=l.memberId])!=null||(s[i]={member:l.member,players:[]}),s[l.memberId].players.push(l),s},{})).sort((s,l)=>{const i=s.players.length,a=l.players.length;if(i===a)return 0;if(i>a)return-1;if(i<a)return 1});return c.$$set=s=>{"players"in s&&n(1,r=s.players)},[t,r]}class Tt extends x{constructor(e){super();C(this,e,Ct,xt,T,{players:1})}}function St(c){let e,n,r,t,s,l,i,a,o,u,f,b,S;var D=c[2];function O(w){return{props:{players:w[0]}}}return D&&(u=new D(O(c))),{c(){e=p("div"),n=p("div"),r=p("span"),r.textContent="Overview",t=v(),s=p("select"),l=p("option"),l.textContent="History",i=p("option"),i.textContent="Recently Spectated",a=p("option"),a.textContent="Most Spectated",o=v(),u&&k(u.$$.fragment),d(r,"class","text-lg mb-2 block"),l.__value="history",l.value=l.__value,i.__value="recently-spectated",i.value=i.__value,a.__value="most-spectated",a.value=a.__value,d(s,"class","border rounded-lg py-2 dark:bg-black"),c[1]===void 0&&et(()=>c[3].call(s)),d(n,"class","flex flex-row justify-between"),d(e,"class","border rounded-lg p-4 mt-2")},m(w,E){_(w,e,E),m(e,n),m(n,r),m(n,t),m(n,s),m(s,l),m(s,i),m(s,a),me(s,c[1]),m(e,o),u&&I(u,e,null),f=!0,b||(S=Y(s,"change",c[3]),b=!0)},p(w,[E]){E&2&&me(s,w[1]);const R={};if(E&1&&(R.players=w[0]),D!==(D=w[2])){if(u){B();const U=u;y(U.$$.fragment,1,0,()=>{A(U,1)}),M()}D?(u=new D(O(w)),k(u.$$.fragment),g(u.$$.fragment,1),I(u,e,null)):u=null}else D&&u.$set(R)},i(w){f||(u&&g(u.$$.fragment,w),f=!0)},o(w){u&&y(u.$$.fragment,w),f=!1},d(w){w&&h(e),u&&A(u),b=!1,S()}}}function Dt(c,e,n){let{players:r}=e,t="history",s;function l(){t=tt(this),n(1,t)}return c.$$set=i=>{"players"in i&&n(0,r=i.players)},c.$$.update=()=>{if(c.$$.dirty&2)switch(t){case"history":n(2,s=wt);break;case"recently-spectated":n(2,s=At);break;case"most-spectated":n(2,s=Tt);break}},[r,t,s,l]}class Lt extends x{constructor(e){super();C(this,e,Dt,St,T,{players:0})}}function je(c,e,n){const r=c.slice();return r[2]=e[n],r}function qe(c){let e,n,r,t;return n=new bt({props:{game:c[2]}}),{c(){e=p("li"),k(n.$$.fragment),r=v(),d(e,"class","border rounded-md p-2")},m(s,l){_(s,e,l),I(n,e,null),m(e,r),t=!0},p(s,l){const i={};l&1&&(i.game=s[2]),n.$set(i)},i(s){t||(g(n.$$.fragment,s),t=!0)},o(s){y(n.$$.fragment,s),t=!1},d(s){s&&h(e),A(n)}}}function Pt(c){let e,n,r,t;e=new Lt({props:{players:c[1]}});let s=c[0],l=[];for(let a=0;a<s.length;a+=1)l[a]=qe(je(c,s,a));const i=a=>y(l[a],1,1,()=>{l[a]=null});return{c(){k(e.$$.fragment),n=v(),r=p("ul");for(let a=0;a<l.length;a+=1)l[a].c();d(r,"class","mt-12 flex flex-col gap-12")},m(a,o){I(e,a,o),_(a,n,o),_(a,r,o);for(let u=0;u<l.length;u+=1)l[u].m(r,null);t=!0},p(a,[o]){const u={};if(o&2&&(u.players=a[1]),e.$set(u),o&1){s=a[0];let f;for(f=0;f<s.length;f+=1){const b=je(a,s,f);l[f]?(l[f].p(b,o),g(l[f],1)):(l[f]=qe(b),l[f].c(),g(l[f],1),l[f].m(r,null))}for(B(),f=s.length;f<l.length;f+=1)i(f);M()}},i(a){if(!t){g(e.$$.fragment,a);for(let o=0;o<s.length;o+=1)g(l[o]);t=!0}},o(a){y(e.$$.fragment,a),l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)y(l[o]);t=!1},d(a){A(e,a),a&&h(n),a&&h(r),q(l,a)}}}function Ot(c,e,n){let r,{games:t}=e;return c.$$set=s=>{"games"in s&&n(0,t=s.games)},c.$$.update=()=>{c.$$.dirty&1&&n(1,r=t.flatMap(s=>s.players))},[t,r]}class Rt extends x{constructor(e){super();C(this,e,Ot,Pt,T,{games:0})}}function jt(c){let e,n,r,t=c[0].eventId+"",s,l,i,a,o,u;return i=new $e({props:{createdAt:c[0].eventCreatedAt,completedAt:c[0].eventCompletedAt}}),o=new Rt({props:{games:c[1]}}),{c(){e=p("div"),n=p("span"),r=j("Ragnarok Event "),s=j(t),l=v(),k(i.$$.fragment),a=v(),k(o.$$.fragment),d(n,"class","whitespace-nowrap text-lg"),d(e,"class","flex flex-row justify-between")},m(f,b){_(f,e,b),m(e,n),m(n,r),m(n,s),m(e,l),I(i,e,null),_(f,a,b),I(o,f,b),u=!0},p(f,[b]){(!u||b&1)&&t!==(t=f[0].eventId+"")&&F(s,t);const S={};b&1&&(S.createdAt=f[0].eventCreatedAt),b&1&&(S.completedAt=f[0].eventCompletedAt),i.$set(S);const D={};b&2&&(D.games=f[1]),o.$set(D)},i(f){u||(g(i.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){y(i.$$.fragment,f),y(o.$$.fragment,f),u=!1},d(f){f&&h(e),A(i),f&&h(a),A(o,f)}}}function qt(c,e,n){let r,{event:t}=e;return c.$$set=s=>{"event"in s&&n(0,t=s.event)},c.$$.update=()=>{c.$$.dirty&1&&n(1,r=[...t.games].sort((s,l)=>new Date(l.gameCreatedAt).getTime()-new Date(s.gameCreatedAt).getTime()))},[t,r]}class Bt extends x{constructor(e){super();C(this,e,qt,jt,T,{event:0})}}function Be(c,e,n){const r=c.slice();return r[1]=e[n],r}function Me(c){let e,n,r;return n=new Bt({props:{event:c[1]}}),{c(){e=p("li"),k(n.$$.fragment),d(e,"class","border rounded-md px-8 py-6")},m(t,s){_(t,e,s),I(n,e,null),r=!0},p(t,s){const l={};s&1&&(l.event=t[1]),n.$set(l)},i(t){r||(g(n.$$.fragment,t),r=!0)},o(t){y(n.$$.fragment,t),r=!1},d(t){t&&h(e),A(n)}}}function Mt(c){let e,n,r,t,s=c[0],l=[];for(let a=0;a<s.length;a+=1)l[a]=Me(Be(c,s,a));const i=a=>y(l[a],1,1,()=>{l[a]=null});return{c(){e=p("ul");for(let a=0;a<l.length;a+=1)l[a].c();n=v(),r=p("li"),d(e,"class","container mx-auto flex flex-col gap-20 mt-6")},m(a,o){_(a,e,o);for(let u=0;u<l.length;u+=1)l[u].m(e,null);m(e,n),m(e,r),t=!0},p(a,[o]){if(o&1){s=a[0];let u;for(u=0;u<s.length;u+=1){const f=Be(a,s,u);l[u]?(l[u].p(f,o),g(l[u],1)):(l[u]=Me(f),l[u].c(),g(l[u],1),l[u].m(e,n))}for(B(),u=s.length;u<l.length;u+=1)i(u);M()}},i(a){if(!t){for(let o=0;o<s.length;o+=1)g(l[o]);t=!0}},o(a){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)y(l[o]);t=!1},d(a){a&&h(e),q(l,a)}}}function Et(c,e,n){let{events:r}=e;return c.$$set=t=>{"events"in t&&n(0,r=t.events)},[r]}class Gt extends x{constructor(e){super();C(this,e,Et,Mt,T,{events:0})}}function Ut(c){let e,n;return e=new Gt({props:{events:c[0]}}),{c(){k(e.$$.fragment)},m(r,t){I(e,r,t),n=!0},p(r,[t]){const s={};t&1&&(s.events=r[0]),e.$set(s)},i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){A(e,r)}}}function zt(c,e,n){let r;return J(c,_e,t=>n(0,r=t)),W(),setInterval(()=>W(),1e3*15),[r]}class Nt extends x{constructor(e){super();C(this,e,zt,Ut,T,{})}}function Ee(c){let e,n,r;return{c(){e=p("button"),e.textContent="Login",d(e,"class","ml-auto border rounded-lg px-4 py-2")},m(t,s){_(t,e,s),n||(r=Y(e,"click",Z),n=!0)},p:P,d(t){t&&h(e),n=!1,r()}}}function Ft(c){let e,n,r,t=!c[0]&&Ee();return{c(){e=p("nav"),n=p("span"),n.textContent="Ragnarok Analytics",r=v(),t&&t.c(),d(n,"class","inline-flex items-center"),d(e,"class","flex flex-row border-b p-4")},m(s,l){_(s,e,l),m(e,n),m(e,r),t&&t.m(e,null)},p(s,[l]){s[0]?t&&(t.d(1),t=null):t?t.p(s,l):(t=Ee(),t.c(),t.m(e,null))},i:P,o:P,d(s){s&&h(e),t&&t.d()}}}function Ht(c,e,n){let r;return J(c,K,t=>n(0,r=t)),r||Z(),[r]}class Kt extends x{constructor(e){super();C(this,e,Ht,Ft,T,{})}}function Ge(c){let e,n;return e=new Nt({}),{c(){k(e.$$.fragment)},m(r,t){I(e,r,t),n=!0},i(r){n||(g(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){A(e,r)}}}function Jt(c){let e,n,r,t;e=new Kt({});let s=c[0]&&Ge();return{c(){k(e.$$.fragment),n=v(),s&&s.c(),r=ue()},m(l,i){I(e,l,i),_(l,n,i),s&&s.m(l,i),_(l,r,i),t=!0},p(l,[i]){l[0]?s?i&1&&g(s,1):(s=Ge(),s.c(),g(s,1),s.m(r.parentNode,r)):s&&(B(),y(s,1,1,()=>{s=null}),M())},i(l){t||(g(e.$$.fragment,l),g(s),t=!0)},o(l){y(e.$$.fragment,l),y(s),t=!1},d(l){A(e,l),l&&h(n),s&&s.d(l),l&&h(r)}}}function Wt(c,e,n){let r;return J(c,K,t=>n(0,r=t)),[r]}class Qt extends x{constructor(e){super();C(this,e,Wt,Jt,T,{})}}lt();addEventListener("load",()=>{new Qt({target:document.querySelector("#application")})});
